{"version":3,"file":"main-CQkNrJ4O.js","sources":["../../src/js/toast.js","../../src/js/api.js","../../src/partials/exercise-card.html?raw","../../src/partials/category-card.html?raw","../../src/partials/favorites-empty.html?raw","../../src/partials/pagination.html?raw","../../src/js/dom.js","../../src/js/pagination.js","../../src/js/modal.js","../../src/js/quote.js","../../src/js/favorites.js","../../src/js/home.js","../../src/js/nav.js","../../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Get target selector for toast - use open dialog if exists (top layer), otherwise default (viewport)\nconst getTarget = () => {\n  const openDialog = document.querySelector('dialog[open]');\n  if (openDialog) {\n    // Return selector for the open dialog\n    if (openDialog.id) return `#${openDialog.id}`;\n    if (openDialog.className) return `dialog.${openDialog.className.split(' ')[0]}`;\n    return 'dialog[open]';\n  }\n  // Return empty string for default behavior - fixed positioning relative to viewport\n  return '';\n};\n\nconst defaultOptions = {\n  position: 'topRight',\n  timeout: 5000,\n};\n\nexport const toast = {\n  success(message) {\n    iziToast.success({\n      ...defaultOptions,\n      title: 'Success',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  error(message) {\n    iziToast.error({\n      ...defaultOptions,\n      title: 'Error',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  warning(message) {\n    iziToast.warning({\n      ...defaultOptions,\n      title: 'Warning',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  info(message) {\n    iziToast.info({\n      ...defaultOptions,\n      title: 'Info',\n      message,\n      target: getTarget(),\n    });\n  },\n};\n","import axios from 'axios';\nimport { toast } from './toast.js';\n\nconst BASE_URL = 'https://your-energy.b.goit.study/api';\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n});\n\n// Error messages mapping\nconst errorMessages = {\n  400: 'Bad request. Please check your input.',\n  401: 'Unauthorized. Please log in.',\n  404: 'Resource not found.',\n  409: 'This email has already been used.',\n  500: 'Server error. Please try again later.',\n  default: 'Something went wrong. Please try again.',\n};\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  response => response,\n  error => {\n    // Handle network errors (no internet, server unreachable)\n    if (!error.response) {\n      const isOffline = !navigator.onLine;\n      const message = isOffline\n        ? 'No internet connection. Please check your network.'\n        : 'Unable to connect to server. Please try again later.';\n      toast.error(message);\n      return Promise.reject(error);\n    }\n\n    const status = error.response.status;\n    const serverMessage = error.response.data?.message;\n    const message = serverMessage || errorMessages[status] || errorMessages.default;\n\n    toast.error(message);\n\n    return Promise.reject(error);\n  }\n);\n\nexport const getQuote = async () => {\n  const { data } = await api.get('/quote');\n  return data;\n};\n\nexport const getFilters = async ({ filter, page = 1, limit = 12 }) => {\n  const { data } = await api.get('/filters', {\n    params: { filter, page, limit },\n  });\n  return data;\n};\n\nexport const getExercises = async ({\n  bodypart,\n  muscles,\n  equipment,\n  keyword,\n  page = 1,\n  limit = 10,\n}) => {\n  const params = { page, limit };\n  if (bodypart) params.bodypart = bodypart;\n  if (muscles) params.muscles = muscles;\n  if (equipment) params.equipment = equipment;\n  if (keyword) params.keyword = keyword;\n\n  const { data } = await api.get('/exercises', { params });\n  return data;\n};\n\nexport const getExerciseById = async id => {\n  const { data } = await api.get(`/exercises/${id}`);\n  return data;\n};\n\nexport const updateRating = async (id, rating, email, review = '') => {\n  const body = { rate: rating, email };\n  if (review) {\n    body.review = review;\n  }\n  const { data } = await api.patch(`/exercises/${id}/rating`, body);\n  return data;\n};\n\nexport const subscribe = async email => {\n  const { data } = await api.post('/subscription', { email });\n  return data;\n};\n","export default \"<li class=\\\"exercise-card {{cardClass}}\\\" data-id=\\\"{{id}}\\\">\\n  <div class=\\\"exercise-card-header\\\">\\n    <div class=\\\"exercise-card-left\\\">\\n      <span class=\\\"exercise-workout-badge\\\">WORKOUT</span>\\n      <span class=\\\"exercise-rating\\\" aria-label=\\\"Rating: {{ratingFormatted}} out of 5\\\">\\n        {{ratingFormatted}}\\n        <svg width=\\\"18\\\" height=\\\"18\\\" class=\\\"exercise-rating-star\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"#icon-star\\\"></use>\\n        </svg>\\n      </span>\\n      <button type=\\\"button\\\" class=\\\"favorite-delete-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Remove {{name}} from favorites\\\">\\n        <svg width=\\\"20\\\" height=\\\"20\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"#icon-trash\\\"></use>\\n        </svg>\\n      </button>\\n    </div>\\n    <button class=\\\"exercise-start-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Start exercise {{name}}\\\">\\n      Start\\n      <svg width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow\\\"></use>\\n      </svg>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"exercise-card-body\\\">\\n    <span class=\\\"exercise-icon\\\">\\n      <svg width=\\\"16px\\\" height=\\\"16px\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-quote\\\"></use>\\n      </svg>\\n    </span>\\n    <h3 class=\\\"exercise-card-title\\\">{{name}}</h3>\\n  </div>\\n\\n  <ul class=\\\"exercise-card-meta\\\">\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Burned calories:</span>\\n      <span class=\\\"meta-value\\\">{{burnedCalories}} / {{time}} min</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Body part:</span>\\n      <span class=\\\"meta-value\\\">{{bodyPart}}</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Target:</span>\\n      <span class=\\\"meta-value\\\">{{target}}</span>\\n    </li>\\n  </ul>\\n</li>\\n\"","export default \"<li class=\\\"category-card\\\" data-filter=\\\"{{filter}}\\\" data-name=\\\"{{name}}\\\">\\n  <img src=\\\"{{imgURL}}\\\" alt=\\\"\\\" class=\\\"category-card-bg\\\">\\n  <div class=\\\"category-card-overlay\\\"></div>\\n  <div class=\\\"category-card-content\\\">\\n    <h3 class=\\\"category-name\\\">\\n      <a href=\\\"#\\\" class=\\\"category-link\\\">{{name}}</a>\\n    </h3>\\n    <p class=\\\"category-filter\\\">{{filter}}</p>\\n  </div>\\n</li>\\n\"","export default \"<div class=\\\"favorites-empty\\\">\\n  <p class=\\\"favorites-empty-text\\\">\\n    It appears that you haven't added any exercises to your favorites yet. To get started, you can\\n    add exercises that you like to your favorites for easier access in the future.\\n  </p>\\n</div>\\n\"","export default \"<ul class=\\\"pagination-list\\\">\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-first\\\" data-page=\\\"1\\\" aria-label=\\\"Go to first page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pagination-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-prev\\\" aria-label=\\\"Go to previous page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pagination-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <ul class=\\\"pagination-numbers\\\"></ul>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-next\\\" aria-label=\\\"Go to next page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pagination-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-last\\\" aria-label=\\\"Go to last page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pagination-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n</ul>\\n\"","// Import templates as raw strings\nimport exerciseCardTemplate from '../partials/exercise-card.html?raw';\nimport categoryCardTemplate from '../partials/category-card.html?raw';\nimport favoritesEmptyTemplate from '../partials/favorites-empty.html?raw';\nimport paginationTemplate from '../partials/pagination.html?raw';\n\n// Map of template names to raw HTML\nconst templates = {\n  'exercise-card': exerciseCardTemplate,\n  'category-card': categoryCardTemplate,\n  'favorites-empty': favoritesEmptyTemplate,\n  'pagination': paginationTemplate,\n};\n\n// Cache for loaded templates (kept for backward compatibility, though not strictly needed with imports)\nconst templateCache = { ...templates };\n\n/**\n * Load template from bundled imports\n * @param {string} templateName\n * @returns {Promise<string>}\n */\nexport const loadTemplate = async templateName => {\n  if (templateCache[templateName]) {\n    return templateCache[templateName];\n  }\n\n  console.warn(`Template not found in bundle: ${templateName}`);\n  return '';\n};\n\n/**\n * Replace placeholders in template with data\n * @param {string} template\n * @param {object} data\n * @returns {string}\n */\nexport const replacePlaceholders = (template, data) => {\n  return template.replace(/\\{\\{(\\w+)\\}\\}/g, (_match, key) => {\n    return data[key] !== undefined ? data[key] : '';\n  });\n};\n\nexport const renderQuote = quoteData => {\n  const quoteText = document.getElementById('quote-text');\n  const quoteAuthor = document.getElementById('quote-author');\n\n  if (quoteText && quoteData.quote) {\n    quoteText.textContent = quoteData.quote;\n  }\n  if (quoteAuthor && quoteData.author) {\n    quoteAuthor.textContent = quoteData.author;\n  }\n};\n\nexport const renderExercises = async (exercises, containerId) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (exercises.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No exercises found. Try another filter.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('exercise-card');\n\n  const exercisesHtml = exercises\n    .map(exercise => {\n      return replacePlaceholders(template, {\n        id: exercise._id,\n        rating: exercise.rating || 0,\n        ratingFormatted: exercise.rating ? exercise.rating.toFixed(1) : '0.0',\n        cardClass: '',\n        name: exercise.name,\n        burnedCalories: exercise.burnedCalories || 0,\n        time: exercise.time || 0,\n        bodyPart: exercise.bodyPart || 'N/A',\n        target: exercise.target || 'N/A',\n      });\n    })\n    .join('');\n\n  container.className = 'exercises-grid';\n  container.innerHTML = exercisesHtml;\n};\n\nexport const renderCategories = async (categories, containerId) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (categories.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No categories found.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('category-card');\n\n  const categoriesHtml = categories\n    .map(cat => {\n      return replacePlaceholders(template, {\n        filter: cat.filter,\n        name: cat.name,\n        imgURL: cat.imgURL || '',\n      });\n    })\n    .join('');\n\n  container.className = 'categories-grid';\n  container.innerHTML = categoriesHtml;\n};\n\n/**\n * Render skeleton loaders\n * @param {string} view - 'categories' or 'exercises'\n * @param {string} containerId - ID of container element\n * @param {number} count - Number of skeleton items to render\n */\nexport const renderSkeleton = (view, containerId, count = 9) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  let skeletonHtml = '';\n\n  if (view === 'categories') {\n    skeletonHtml = Array(count)\n      .fill('<li class=\"category-skeleton skeleton-shimmer\"></li>')\n      .join('');\n    container.className = 'categories-grid';\n    container.innerHTML = skeletonHtml;\n  } else {\n    const item = `\n      <li class=\"exercise-skeleton\">\n        <div class=\"shimmer-header\">\n           <div class=\"shimmer-badge skeleton-shimmer\"></div>\n           <div class=\"shimmer-badge skeleton-shimmer\"></div>\n        </div>\n        <div class=\"shimmer-title skeleton-shimmer\"></div>\n        <div class=\"shimmer-line skeleton-shimmer\"></div>\n        <div class=\"shimmer-line skeleton-shimmer\"></div>\n      </li>\n    `;\n    skeletonHtml = Array(count).fill(item).join('');\n    container.className = 'exercises-grid';\n    container.innerHTML = skeletonHtml;\n  }\n};\n","/**\n * Pagination module\n * Handles pagination UI rendering and user interactions\n */\n\nimport { loadTemplate } from './dom.js';\n\n/**\n * Render pagination controls\n * @param {number} currentPage - Current page number\n * @param {number} totalPages - Total number of pages\n * @param {string} containerId - ID of container element\n */\nexport const renderPagination = async (currentPage, totalPages, containerId = 'pagination-container') => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (totalPages <= 1) {\n    container.innerHTML = '';\n    return;\n  }\n\n  // Load template if not exists\n  if (!container.querySelector('.pagination-list')) {\n    const template = await loadTemplate('pagination');\n    container.innerHTML = template;\n  }\n\n  // Get navigation links from markup\n  const firstLink = container.querySelector('.pagination-first');\n  const prevLink = container.querySelector('.pagination-prev');\n  const nextLink = container.querySelector('.pagination-next');\n  const lastLink = container.querySelector('.pagination-last');\n  const pagesContainer = container.querySelector('.pagination-numbers');\n\n  // Update navigation links state\n  updateLinkState(firstLink, currentPage === 1, 1);\n  updateLinkState(prevLink, currentPage === 1, currentPage - 1);\n  updateLinkState(nextLink, currentPage === totalPages, currentPage + 1);\n  updateLinkState(lastLink, currentPage === totalPages, totalPages);\n\n  // Generate pages array with ellipsis logic\n  const pages = generatePageNumbers(currentPage, totalPages);\n\n  // Build pages HTML with semantic list items\n  const pagesHtml = pages\n    .map(page => {\n      if (page === '...') {\n        return `<li aria-hidden=\"true\"><span class=\"pagination-dots\">...</span></li>`;\n      }\n      const isActive = page === currentPage;\n      if (isActive) {\n        return `<li><a href=\"#\" class=\"pagination-number current\" aria-current=\"page\">${page}</a></li>`;\n      }\n      return `<li><a href=\"#\" class=\"pagination-number\" data-page=\"${page}\">${page}</a></li>`;\n    })\n    .join('');\n\n  pagesContainer.innerHTML = pagesHtml;\n};\n\n/**\n * Update link state (disabled/enabled)\n * @param {HTMLElement} link - Link element\n * @param {boolean} isDisabled - Whether link should be disabled\n * @param {number} page - Page number for data attribute\n */\nfunction updateLinkState(link, isDisabled, page) {\n  if (isDisabled) {\n    link.classList.add('disabled');\n    link.setAttribute('aria-disabled', 'true');\n    link.removeAttribute('data-page');\n  } else {\n    link.classList.remove('disabled');\n    link.removeAttribute('aria-disabled');\n    link.dataset.page = page;\n  }\n}\n\n/**\n * Generate array of page numbers with ellipsis\n * Shows only 3 numbers: previous, current, next (without first and last)\n * @param {number} currentPage - Current page number\n * @param {number} totalPages - Total number of pages\n * @returns {Array} Array of page numbers and ellipsis\n */\nfunction generatePageNumbers(currentPage, totalPages) {\n  const pages = [];\n\n  // If 3 or fewer pages, show all\n  if (totalPages <= 3) {\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push(i);\n    }\n    return pages;\n  }\n\n  // Determine which 3 numbers to show\n  let start, end;\n\n  if (currentPage === 1) {\n    // Current is first: show 1, 2, 3\n    start = 1;\n    end = 3;\n  } else if (currentPage === totalPages) {\n    // Current is last: show (last-2), (last-1), last\n    start = totalPages - 2;\n    end = totalPages;\n  } else {\n    // Current in middle: show prev, current, next\n    start = currentPage - 1;\n    end = currentPage + 1;\n  }\n\n  // Add ellipsis before if needed\n  if (start > 1) {\n    pages.push('...');\n  }\n\n  // Add the 3 page numbers\n  for (let i = start; i <= end; i++) {\n    pages.push(i);\n  }\n\n  // Add ellipsis after if needed\n  if (end < totalPages) {\n    pages.push('...');\n  }\n\n  return pages;\n}\n\n/**\n * Setup pagination event listeners\n * @param {Function} onPageChange - Callback function when page changes\n * @param {string} containerId - ID of container element\n */\nexport function setupPagination(onPageChange, containerId = 'pagination-container') {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  // Check if already has listener to prevent duplicates\n  if (container.dataset.listenerAttached === 'true') return;\n  container.dataset.listenerAttached = 'true';\n\n  container.addEventListener('click', e => {\n    const link = e.target.closest('.pagination-number, .pagination-btn');\n\n    if (!link) return;\n    if (link.classList.contains('disabled') || link.classList.contains('current')) return;\n\n    e.preventDefault();\n\n    const newPage = Number(link.dataset.page);\n    if (newPage && !isNaN(newPage)) {\n      onPageChange(newPage);\n    }\n  });\n}\n\n/**\n * Scroll to top of content area\n * @param {string} targetId - ID of element to scroll to\n */\nexport function scrollToTop(targetId = 'exercises-header') {\n  const target = document.getElementById(targetId);\n  if (target) {\n    target.scrollIntoView({ behavior: 'smooth' });\n  } else {\n    document.querySelector('.exercises-section')?.scrollIntoView({ behavior: 'smooth' });\n  }\n}\n","// Modal management functions\nexport const openModal = modalId => {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.showModal();\n    // No need to manually manage focus or aria-hidden with dialog\n    \n    // Add backdrop click listener if not already attached\n    if (modal.dataset.backdropListener !== 'true') {\n      modal.addEventListener('click', (e) => {\n        const rect = modal.getBoundingClientRect();\n        const isInDialog = (rect.top <= e.clientY && e.clientY <= rect.top + rect.height &&\n          rect.left <= e.clientX && e.clientX <= rect.left + rect.width);\n        if (!isInDialog) {\n          modal.close();\n        }\n      });\n      modal.dataset.backdropListener = 'true';\n    }\n  }\n};\n\nexport const closeModal = modalId => {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.close();\n  }\n};\n\n// Render exercise details in modal\nexport const renderExerciseModal = exercise => {\n  if (!exercise) return;\n\n  // Update GIF\n  const gifElement = document.getElementById('modal-exercise-gif');\n  if (gifElement) {\n    gifElement.src = exercise.gifUrl || '';\n    gifElement.alt = exercise.name || 'Exercise';\n  }\n\n  // Update title\n  const titleElement = document.getElementById('modal-exercise-title');\n  if (titleElement) {\n    titleElement.textContent = exercise.name || 'Exercise';\n  }\n\n  // Update rating\n  const ratingElement = document.getElementById('modal-exercise-rating');\n  if (ratingElement) {\n    const rating = exercise.rating || 0;\n    const fullStars = Math.floor(rating);\n\n    ratingElement.innerHTML = `\n      <span class=\"rating-value\">${rating.toFixed(1)}</span>\n      <div class=\"rating-stars\">\n        ${Array.from({ length: 5 }, (_, i) => {\n          const filled = i < fullStars ? 'filled' : '';\n          return `<svg class=\"star ${filled}\" width=\"18\" height=\"18\" aria-hidden=\"true\">\n            <use href=\"#icon-star\"></use>\n          </svg>`;\n        }).join('')}\n      </div>\n    `;\n  }\n\n  // Update details\n  const targetElement = document.getElementById('modal-target');\n  if (targetElement) targetElement.textContent = exercise.target || 'N/A';\n\n  const bodyPartElement = document.getElementById('modal-bodypart');\n  if (bodyPartElement) bodyPartElement.textContent = exercise.bodyPart || 'N/A';\n\n  const equipmentElement = document.getElementById('modal-equipment');\n  if (equipmentElement) equipmentElement.textContent = exercise.equipment || 'N/A';\n\n  const popularElement = document.getElementById('modal-popular');\n  if (popularElement) popularElement.textContent = exercise.popularity || '0';\n\n  const caloriesElement = document.getElementById('modal-calories');\n  if (caloriesElement) {\n    caloriesElement.textContent = `${exercise.burnedCalories || 0}/${exercise.time || 0} min`;\n  }\n\n  // Update description\n  const descriptionElement = document.getElementById('modal-description');\n  if (descriptionElement) {\n    descriptionElement.textContent = exercise.description || 'No description available.';\n  }\n\n  // Store exercise ID for later use (favorites, rating)\n  const modal = document.getElementById('exercise-modal');\n  if (modal) {\n    modal.dataset.exerciseId = exercise._id;\n  }\n};\n\n// Show rating modal\nexport const showRatingModal = () => {\n  closeModal('exercise-modal');\n  const ratingModal = document.getElementById('rating-modal');\n\n  // Add close event listener once to reset form when modal closes (any method)\n  if (ratingModal && ratingModal.dataset.closeListener !== 'true') {\n    ratingModal.addEventListener('close', resetRatingForm);\n    ratingModal.dataset.closeListener = 'true';\n  }\n\n  openModal('rating-modal');\n  resetRatingForm();\n  initRatingStars();\n};\n\n// Hide rating modal and return to main screen\nexport const hideRatingModal = () => {\n  closeModal('rating-modal');\n};\n\n// Reset rating form\nconst resetRatingForm = () => {\n  const ratingForm = document.getElementById('rating-form');\n  const ratingValue = document.getElementById('rating-display-value');\n\n  if (ratingForm) ratingForm.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n};\n\n// Initialize rating stars interaction\nexport const initRatingStars = () => {\n  const starsContainer = document.getElementById('rating-stars');\n  const ratingValue = document.getElementById('rating-display-value');\n\n  if (!starsContainer) return;\n\n  // Check if already has listener to prevent duplicates\n  if (starsContainer.dataset.listenerAttached === 'true') return;\n  starsContainer.dataset.listenerAttached = 'true';\n\n  // Update rating display when radio changes\n  starsContainer.addEventListener('change', (e) => {\n    if (e.target.type === 'radio') {\n      const selectedRating = parseFloat(e.target.value);\n      if (ratingValue) {\n        ratingValue.textContent = selectedRating.toFixed(1);\n      }\n    }\n  });\n};\n\n// Get current rating value from radio buttons\nexport const getCurrentRating = () => {\n  const checkedRadio = document.querySelector('#rating-stars input[name=\"rating\"]:checked');\n  return checkedRadio ? parseFloat(checkedRadio.value) : 0;\n};\n","import { getQuote } from './api.js';\nimport { renderQuote } from './dom.js';\n\nconst QUOTE_STORAGE_KEY = 'quote-of-the-day';\n\n/**\n * Get today's date in YYYY-MM-DD format\n */\nfunction getTodayDate() {\n  const today = new Date();\n  return today.toISOString().split('T')[0];\n}\n\n/**\n * Get cached quote from localStorage\n */\nfunction getCachedQuote() {\n  try {\n    const cached = localStorage.getItem(QUOTE_STORAGE_KEY);\n    if (!cached) return null;\n\n    const { quote, author, date } = JSON.parse(cached);\n    const today = getTodayDate();\n\n    if (date === today) {\n      return { quote, author };\n    }\n\n    localStorage.removeItem(QUOTE_STORAGE_KEY);\n    return null;\n  } catch (error) {\n    console.error('Error reading cached quote:', error);\n    return null;\n  }\n}\n\n/**\n * Save quote to localStorage\n */\nfunction cacheQuote(quote, author) {\n  try {\n    const data = {\n      quote,\n      author,\n      date: getTodayDate(),\n    };\n    localStorage.setItem(QUOTE_STORAGE_KEY, JSON.stringify(data));\n  } catch (error) {\n    console.error('Error caching quote:', error);\n  }\n}\n\n/**\n * Initialize Quote of the Day\n * Checks cache first, otherwise fetches from API\n */\nexport async function initQuote() {\n  try {\n    let quoteData = getCachedQuote();\n\n    if (!quoteData) {\n      quoteData = await getQuote();\n      cacheQuote(quoteData.quote, quoteData.author);\n    }\n\n    renderQuote(quoteData);\n  } catch (err) {\n    console.error('Failed to initialize quote:', err);\n  }\n}\n","const FAVORITES_KEY = 'favoriteExercises';\n\n// Get all favorites from localStorage\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(FAVORITES_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (err) {\n    console.error('Failed to get favorites:', err);\n    return [];\n  }\n}\n\n// Add exercise to favorites\nexport function addFavorite(exercise) {\n  try {\n    const favorites = getFavorites();\n\n    // Check if already exists\n    if (favorites.some(fav => fav._id === exercise._id)) {\n      return false;\n    }\n\n    favorites.push(exercise);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n    return true;\n  } catch (err) {\n    console.error('Failed to add favorite:', err);\n    return false;\n  }\n}\n\n// Remove exercise from favorites\nexport function removeFavorite(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filtered = favorites.filter(fav => fav._id !== exerciseId);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(filtered));\n    return true;\n  } catch (err) {\n    console.error('Failed to remove favorite:', err);\n    return false;\n  }\n}\n\n// Check if exercise is in favorites\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.some(fav => fav._id === exerciseId);\n}\n\n// Toggle favorite status\nexport function toggleFavorite(exercise) {\n  if (isFavorite(exercise._id)) {\n    return removeFavorite(exercise._id);\n  } else {\n    return addFavorite(exercise);\n  }\n}\n\n// --- View / Initialization Logic (migrated from init-favorites.js) ---\n\nimport { getExerciseById, updateRating } from './api.js';\nimport { loadTemplate, replacePlaceholders } from './dom.js';\nimport {\n  openModal,\n  closeModal,\n  renderExerciseModal,\n  showRatingModal,\n  hideRatingModal,\n  getCurrentRating,\n} from './modal.js';\nimport { initQuote } from './quote.js';\nimport { renderPagination, setupPagination } from './pagination.js';\nimport { toast } from './toast.js';\n\n// Favorites page state\nconst favoritesState = {\n  page: 1,\n  perPage: 8,\n};\n\n// Get items per page based on screen width\nfunction getPerPage() {\n  const width = window.innerWidth;\n  if (width >= 1440) return Infinity; // Desktop: no limit (scroll)\n  if (width >= 768) return 10; // Tablet\n  return 8; // Mobile\n}\n\n// Check if we should use pagination\nfunction usePagination() {\n  return window.innerWidth < 1440;\n}\n\n// Render empty state\nasync function renderEmptyState() {\n  const container = document.getElementById('favorites-container');\n  if (!container) return;\n\n  const template = await loadTemplate('favorites-empty');\n  container.innerHTML = template;\n}\n\n// Render favorites list\nasync function renderFavorites() {\n  const container = document.getElementById('favorites-container');\n  if (!container) return;\n\n  const allFavorites = getFavorites();\n\n  if (allFavorites.length === 0) {\n    await renderEmptyState();\n    // Hide pagination when empty\n    renderPagination(1, 1, 'favorites-pagination');\n    return;\n  }\n\n  // Calculate pagination\n  const perPage = getPerPage();\n  const shouldPaginate = usePagination();\n  const totalPages = shouldPaginate ? Math.ceil(allFavorites.length / perPage) : 1;\n\n  // Ensure current page is valid\n  if (favoritesState.page > totalPages) {\n    favoritesState.page = totalPages;\n  }\n\n  // Get items for current page\n  const startIndex = shouldPaginate ? (favoritesState.page - 1) * perPage : 0;\n  const endIndex = shouldPaginate ? startIndex + perPage : allFavorites.length;\n  const favorites = allFavorites.slice(startIndex, endIndex);\n\n  const cardTemplate = await loadTemplate('exercise-card');\n\n  const cardsHtml = favorites\n    .map(exercise => {\n      return replacePlaceholders(cardTemplate, {\n        id: exercise._id,\n        name: exercise.name,\n        burnedCalories: exercise.burnedCalories || 0,\n        time: exercise.time || 0,\n        bodyPart: exercise.bodyPart || 'N/A',\n        target: exercise.target || 'N/A',\n        rating: exercise.rating || 0,\n        ratingFormatted: exercise.rating ? exercise.rating.toFixed(1) : '0.0',\n        cardClass: 'is-favorite',\n      });\n    })\n    .join('');\n\n  container.className = 'favorites-grid';\n  container.innerHTML = cardsHtml;\n\n  // Render pagination (only visible on mobile/tablet via CSS)\n  if (shouldPaginate) {\n    renderPagination(favoritesState.page, totalPages, 'favorites-pagination');\n  }\n}\n\n// Setup exercise modal\nfunction setupExerciseModal(exerciseId) {\n  const closeBtn = document.getElementById('modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => closeModal('exercise-modal');\n  }\n\n  const giveRatingBtn = document.getElementById('give-rating-btn');\n  if (giveRatingBtn) {\n    giveRatingBtn.onclick = () => {\n      showRatingModal();\n      setupRatingModal(exerciseId);\n    };\n  }\n\n  const addToFavoritesBtn = document.getElementById('add-to-favorites-btn');\n  if (addToFavoritesBtn) {\n    // On favorites page, items are always in favorites\n    addToFavoritesBtn.innerHTML = `\n      <span class=\"btn-text\">Remove from favorites</span>\n      <svg width=\"20\" height=\"20\" aria-hidden=\"true\">\n        <use href=\"#icon-trash\"></use>\n      </svg>\n    `;\n\n    addToFavoritesBtn.onclick = async () => {\n      removeFavorite(exerciseId);\n      closeModal('exercise-modal');\n      await renderFavorites();\n    };\n  }\n}\n\n// Setup rating modal\nfunction setupRatingModal(exerciseId) {\n  const closeBtn = document.getElementById('rating-modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => hideRatingModal();\n  }\n\n  const ratingForm = document.getElementById('rating-form');\n  if (ratingForm) {\n    ratingForm.onsubmit = async e => {\n      e.preventDefault();\n\n      // Native validation handles required fields\n      if (!ratingForm.checkValidity()) {\n        ratingForm.reportValidity();\n        return;\n      }\n\n      const rating = getCurrentRating();\n      const email = ratingForm.email.value.trim();\n      const review = ratingForm.review?.value.trim() || '';\n\n      try {\n        await updateRating(exerciseId, rating, email, review);\n        hideRatingModal();\n        toast.success('Rating submitted successfully!');\n      } catch (err) {\n        console.error('Failed to submit rating:', err);\n      }\n    };\n  }\n}\n\n// Handle page change\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== favoritesState.page) {\n    favoritesState.page = newPage;\n    renderFavorites();\n  }\n}\n\n// Setup resize listener\nfunction setupResizeListener() {\n  let timeoutId;\n  let currentPerPage = getPerPage();\n\n  window.addEventListener('resize', () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      const newPerPage = getPerPage();\n      if (newPerPage !== currentPerPage) {\n        currentPerPage = newPerPage;\n        favoritesState.page = 1;\n        renderFavorites();\n      }\n    }, 300);\n  });\n}\n\n// Initialize favorites page\nexport async function initFavoritesPage() {\n  const favoritesPage = document.querySelector('.favorites-page');\n\n  try {\n    // Initialize Quote\n    await initQuote();\n\n    await renderFavorites();\n\n    // Setup event delegation for favorites\n    setupFavoritesEventDelegation();\n\n    // Setup pagination\n    setupPagination(handlePageChange, 'favorites-pagination');\n\n    // Setup resize listener\n    setupResizeListener();\n  } catch (err) {\n    console.error('Error initializing favorites page:', err);\n  } finally {\n    if (favoritesPage) favoritesPage.classList.add('loaded');\n  }\n}\n\n// Setup event delegation for favorites container\nfunction setupFavoritesEventDelegation() {\n  const container = document.getElementById('favorites-container');\n  if (!container) return;\n\n  // Check if already has listener to prevent duplicates\n  if (container.dataset.listenerAttached === 'true') return;\n  container.dataset.listenerAttached = 'true';\n\n  container.addEventListener('click', async (e) => {\n    // Handle delete button clicks\n    const deleteBtn = e.target.closest('.favorite-delete-btn');\n    if (deleteBtn) {\n      e.stopPropagation();\n      const exerciseId = deleteBtn.dataset.id;\n      if (exerciseId) {\n        removeFavorite(exerciseId);\n        try {\n          await renderFavorites();\n        } catch (err) {\n          console.error('Failed to render favorites:', err);\n        }\n      }\n      return;\n    }\n\n    // Handle start button clicks\n    const startBtn = e.target.closest('.exercise-start-btn');\n    if (startBtn) {\n      e.stopPropagation();\n      const exerciseId = startBtn.dataset.id;\n      if (!exerciseId) return;\n\n      try {\n        const exercise = await getExerciseById(exerciseId);\n        renderExerciseModal(exercise);\n        openModal('exercise-modal');\n        setupExerciseModal(exerciseId);\n      } catch (err) {\n        console.error('Failed to fetch exercise details:', err);\n      }\n    }\n  });\n}\n","import {\n  getFilters,\n  getExercises,\n  getExerciseById,\n  updateRating,\n} from './api.js';\nimport {\n  renderCategories,\n  renderExercises,\n  renderSkeleton,\n} from './dom.js';\nimport {\n  renderPagination,\n  setupPagination as setupPaginationListeners,\n  scrollToTop,\n} from './pagination.js';\nimport {\n  openModal,\n  closeModal,\n  renderExerciseModal,\n  showRatingModal,\n  hideRatingModal,\n  getCurrentRating,\n} from './modal.js';\nimport { addFavorite, removeFavorite, isFavorite } from './favorites.js';\nimport { initQuote } from './quote.js';\nimport { toast } from './toast.js';\n\n// Email validation helper\nfunction validateEmail(email) {\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return re.test(email);\n}\n\n// State object\nconst appState = {\n  view: 'categories', // 'categories' or 'exercises'\n  filter: 'Muscles',  // Active tab\n  category: null,     // Selected category name\n  categoryFilter: null, // The filter type of the selected category (e.g. 'Muscles')\n  keyword: '',\n  page: 1\n};\n\n// Get items limit based on screen width and view type\nconst getLimit = () => {\n  const width = window.innerWidth;\n\n  if (appState.view === 'categories') {\n    // Categories: mobile 9, tablet/desktop 12\n    return width < 768 ? 9 : 12;\n  } else {\n    // Exercises: mobile 8, tablet 10 (desktop has no pagination limit)\n    return width < 768 ? 8 : 10;\n  }\n};\n\n// Initialize home page\nexport async function initHomePage() {\n  const mainContent = document.querySelector('.main-content');\n\n  // Render initial skeletons immediately\n  const initialLimit = getLimit();\n  renderSkeleton(appState.view, 'exercises-container', initialLimit);\n\n  try {\n    // 1. Initialize Quote\n    // Note: This is async and might fetch from API, so skeletal loading for exercises \n    // should already be visible by now.\n    await initQuote();\n\n    // 2. Initial Categories\n    await fetchAndRender();\n\n  } catch (err) {\n    console.error('Error initializing home page:', err);\n  } finally {\n    if (mainContent) {\n      mainContent.classList.add('loaded');\n    }\n  }\n\n  // Setup event listeners\n  setupFilterTabs();\n  setupExerciseCards();\n  setupPaginationListeners(handlePageChange);\n  setupResizeListener();\n\n  // Note: setupExerciseSearch is called dynamically when entering exercises view\n}\n\n// Setup window resize listener to update limit and re-fetch if needed\nfunction setupResizeListener() {\n  let timeoutId;\n  let currentLimit = getLimit();\n\n  window.addEventListener('resize', () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      const newLimit = getLimit();\n      if (newLimit !== currentLimit) {\n        currentLimit = newLimit;\n        appState.page = 1; // Reset to first page when limit changes to avoid empty pages\n        fetchAndRender();\n      }\n    }, 300);\n  });\n}\n\n// Fetch and render based on current state\nasync function fetchAndRender() {\n  const container = document.getElementById('exercises-container');\n\n  try {\n    const limit = getLimit();\n    renderSkeleton(appState.view, 'exercises-container', limit);\n\n    if (appState.view === 'categories') {\n      // Fetch Categories\n      const filters = await getFilters({\n        filter: appState.filter,\n        page: appState.page,\n        limit\n      });\n      renderCategories(filters.results, 'exercises-container');\n      renderPagination(filters.page ? Number(filters.page) : 1, filters.totalPages || 1);\n    } else {\n      // Fetch Exercises\n      const params = {\n        limit,\n        page: appState.page\n      };\n\n      if (appState.categoryFilter === 'Muscles') params.muscles = appState.category.toLowerCase();\n      else if (appState.categoryFilter === 'Body parts') params.bodypart = appState.category.toLowerCase();\n      else if (appState.categoryFilter === 'Equipment') params.equipment = appState.category.toLowerCase();\n\n      if (appState.keyword) params.keyword = appState.keyword;\n\n      const exercises = await getExercises(params);\n      renderExercises(exercises.results, 'exercises-container');\n      renderPagination(exercises.page ? Number(exercises.page) : 1, exercises.totalPages || 1);\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    if (container) container.innerHTML = '<p class=\"error-message\">Failed to load data. Please try again.</p>';\n  }\n}\n\n// Handle page change from pagination\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== appState.page) {\n    appState.page = newPage;\n    fetchAndRender();\n    scrollToTop();\n  }\n}\n\n// Setup filter tabs\nfunction setupFilterTabs() {\n  const filterTabs = document.getElementById('filter-tabs');\n  if (!filterTabs) return;\n\n  // Check if already has listener to prevent duplicates\n  if (filterTabs.dataset.listenerAttached === 'true') return;\n  filterTabs.dataset.listenerAttached = 'true';\n\n  filterTabs.addEventListener('click', async e => {\n    const btn = e.target.closest('.filter-tab');\n    if (!btn) return;\n\n    document.querySelectorAll('.filter-tab').forEach(t => {\n      t.classList.remove('active');\n    });\n    btn.classList.add('active');\n\n    // Update state\n    appState.filter = btn.dataset.filter;\n    appState.view = 'categories';\n    appState.page = 1;\n    appState.keyword = '';\n    appState.category = null;\n\n    hideExercisesHeader();\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch data:', err);\n    }\n  });\n}\n\n// Setup exercise cards (and category clicks)\nfunction setupExerciseCards() {\n  const exercisesContainer = document.getElementById('exercises-container');\n  if (!exercisesContainer) return;\n\n  // Check if already has listener to prevent duplicates\n  if (exercisesContainer.dataset.listenerAttached === 'true') return;\n  exercisesContainer.dataset.listenerAttached = 'true';\n\n  exercisesContainer.addEventListener('click', async e => {\n    // Handle category card clicks\n    const categoryCard = e.target.closest('.category-card');\n    if (categoryCard) {\n      e.preventDefault();\n      const categoryName = categoryCard.dataset.name;\n      const categoryFilter = categoryCard.dataset.filter;\n\n      if (!categoryName) return;\n\n      // Update state\n      appState.view = 'exercises';\n      appState.category = categoryName;\n      appState.categoryFilter = categoryFilter; // Use the filter from the card!\n      appState.page = 1;\n      appState.keyword = '';\n\n      showExercisesHeader(categoryName);\n      setupExerciseSearch(); // Re-init search\n\n      try {\n        await fetchAndRender();\n      } catch (err) {\n        console.error('Failed to fetch exercises:', err);\n      }\n      return;\n    }\n\n    // Handle Start button clicks\n    const startBtn = e.target.closest('.exercise-start-btn');\n    if (startBtn) {\n      const exerciseId = startBtn.dataset.id;\n      if (!exerciseId) return;\n\n      try {\n        const exercise = await getExerciseById(exerciseId);\n        renderExerciseModal(exercise);\n        openModal('exercise-modal');\n        setupExerciseModal(exerciseId);\n      } catch (err) {\n        console.error(`Failed to fetch exercise details for ${exerciseId}:`, err);\n      }\n    }\n  });\n}\n\n\n// Show exercises header with breadcrumb\nfunction showExercisesHeader(categoryName) {\n  const sectionTitle = document.getElementById('section-title');\n  const searchForm = document.getElementById('exercise-search-form');\n  \n  if (sectionTitle) {\n    sectionTitle.innerHTML = `Exercises / <span class=\"category-name\">${categoryName}</span>`;\n  }\n  \n  if (searchForm) {\n    searchForm.classList.remove('hidden');\n  }\n}\n\n// Hide exercises header\nfunction hideExercisesHeader() {\n  const sectionTitle = document.getElementById('section-title');\n  const searchForm = document.getElementById('exercise-search-form');\n  const searchInput = document.getElementById('exercise-search-input');\n  const clearBtn = document.getElementById('exercise-clear-btn');\n  \n  if (sectionTitle) {\n    sectionTitle.textContent = 'Exercises';\n  }\n  \n  if (searchForm) {\n    searchForm.classList.add('hidden');\n  }\n  \n  // Clear search input and hide clear button\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  \n  if (clearBtn) {\n    clearBtn.classList.add('hidden');\n  }\n}\n\n// Setup exercise search\nfunction setupExerciseSearch() {\n  const searchForm = document.getElementById('exercise-search-form');\n  const searchInput = document.getElementById('exercise-search-input');\n  const clearBtn = document.getElementById('exercise-clear-btn');\n\n  if (!searchForm || !searchInput) return;\n\n  // Check if already has listener to prevent duplicates\n  if (searchForm.dataset.listenerAttached === 'true') return;\n  searchForm.dataset.listenerAttached = 'true';\n\n  // Show/hide clear button based on input\n  searchInput.addEventListener('input', () => {\n    if (searchInput.value.trim()) {\n      clearBtn.classList.remove('hidden');\n    } else {\n      clearBtn.classList.add('hidden');\n    }\n  });\n\n  // Clear button click\n  clearBtn.addEventListener('click', async () => {\n    searchInput.value = '';\n    clearBtn.classList.add('hidden');\n    searchInput.focus();\n\n    // Update state and re-fetch\n    appState.keyword = '';\n    appState.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch exercises:', err);\n    }\n  });\n\n  // Search form submit\n  searchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const keyword = searchInput.value.trim();\n\n    // Update state and re-fetch\n    appState.keyword = keyword;\n    appState.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to search exercises:', err);\n    }\n  });\n}\n\n// Setup exercise modal\nfunction setupExerciseModal(exerciseId) {\n  const closeBtn = document.getElementById('modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => closeModal('exercise-modal');\n  }\n\n  const giveRatingBtn = document.getElementById('give-rating-btn');\n  if (giveRatingBtn) {\n    giveRatingBtn.onclick = () => {\n      showRatingModal();\n      setupRatingModal(exerciseId);\n    };\n  }\n\n  const addToFavoritesBtn = document.getElementById('add-to-favorites-btn');\n  if (addToFavoritesBtn) {\n    const updateFavoriteButton = () => {\n      if (isFavorite(exerciseId)) {\n        addToFavoritesBtn.innerHTML = `\n          <span class=\"btn-text\">Remove from favorites</span>\n          <svg width=\"20\" height=\"20\" aria-hidden=\"true\">\n            <use href=\"#icon-trash\"></use>\n          </svg>\n        `;\n      } else {\n        addToFavoritesBtn.innerHTML = `\n          <span class=\"btn-text\">Add to favorites</span>\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" aria-hidden=\"true\">\n            <path d=\"M10 3.5C10 3.5 6.5 1 3.5 3.5C0.5 6 2 10 10 16.5C18 10 19.5 6 16.5 3.5C13.5 1 10 3.5 10 3.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n          </svg>\n        `;\n      }\n    };\n\n    addToFavoritesBtn.onclick = async () => {\n      if (isFavorite(exerciseId)) {\n        removeFavorite(exerciseId);\n      } else {\n        const exercise = await getExerciseById(exerciseId);\n        addFavorite(exercise);\n      }\n      updateFavoriteButton();\n    };\n\n    updateFavoriteButton();\n  }\n}\n\n// Setup rating modal\nfunction setupRatingModal(exerciseId) {\n  const closeBtn = document.getElementById('rating-modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => hideRatingModal();\n  }\n\n  const ratingForm = document.getElementById('rating-form');\n  if (ratingForm) {\n    ratingForm.onsubmit = async e => {\n      e.preventDefault();\n\n      // Native validation handles required fields\n      if (!ratingForm.checkValidity()) {\n        ratingForm.reportValidity();\n        return;\n      }\n\n      const rating = getCurrentRating();\n      const email = ratingForm.email.value.trim();\n      const review = ratingForm.review?.value.trim() || '';\n\n      try {\n        await updateRating(exerciseId, rating, email, review);\n        hideRatingModal();\n        toast.success('Rating submitted successfully!');\n      } catch (err) {\n        console.error('Failed to submit rating:', err);\n      }\n    };\n  }\n}\n","// Burger menu functionality\nfunction setupBurgerMenu() {\n  const burgerBtn = document.getElementById('burger-btn');\n  const mobileMenu = document.getElementById('mobile-menu');\n  const mobileCloseBtn = document.getElementById('mobile-close-btn');\n\n  if (!burgerBtn || !mobileMenu || !mobileCloseBtn) return;\n\n  burgerBtn.addEventListener('click', openMobileMenu);\n  mobileCloseBtn.addEventListener('click', closeMobileMenu);\n\n  // Close on backdrop click (native dialog backdrop)\n  mobileMenu.addEventListener('click', e => {\n    if (e.target === mobileMenu) {\n      closeMobileMenu();\n    }\n  });\n\n  // Close on navigation link click\n  const mobileNavLinks = mobileMenu.querySelectorAll('.mobile-nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  });\n\n  // Native dialog handles Escape key automatically\n  mobileMenu.addEventListener('close', () => {\n    burgerBtn.setAttribute('aria-expanded', 'false');\n    document.body.style.overflow = '';\n  });\n}\n\nfunction openMobileMenu() {\n  const mobileMenu = document.getElementById('mobile-menu');\n  const burgerBtn = document.getElementById('burger-btn');\n\n  if (mobileMenu) {\n    mobileMenu.showModal();\n    document.body.style.overflow = 'hidden';\n  }\n\n  if (burgerBtn) {\n    burgerBtn.setAttribute('aria-expanded', 'true');\n  }\n}\n\nfunction closeMobileMenu() {\n  const mobileMenu = document.getElementById('mobile-menu');\n\n  if (mobileMenu) {\n    mobileMenu.close();\n  }\n}\n\n// Set active navigation link based on current page\nfunction setActiveNavLink() {\n  const currentPath = window.location.pathname;\n  const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');\n\n  navLinks.forEach(link => {\n    const href = link.getAttribute('href');\n    const isActive = currentPath.endsWith(href.replace('./', '/')) ||\n                     (currentPath.endsWith('/') && href.includes('index.html')) ||\n                     (currentPath.endsWith('/index.html') && href.includes('index.html')) ||\n                     (currentPath.includes('favorites') && href.includes('favorites'));\n\n    if (isActive) {\n      link.setAttribute('aria-current', 'page');\n      link.classList.add('active');\n    } else {\n      link.removeAttribute('aria-current');\n      link.classList.remove('active');\n    }\n  });\n}\n\n// Initialize navigation\ndocument.addEventListener('DOMContentLoaded', () => {\n  setupBurgerMenu();\n  setActiveNavLink();\n});\n","import { initHomePage } from './js/home.js';\nimport { initFavoritesPage } from './js/favorites.js';\nimport { subscribe } from './js/api.js';\nimport { toast } from './js/toast.js';\nimport './js/nav.js';\n\nfunction setActiveNav() {\n  const path = window.location.pathname;\n  const navHome = document.getElementById('nav-home');\n  const navFavorites = document.getElementById('nav-favorites');\n\n  if (path.includes('favorites')) {\n    navFavorites?.classList.add('active');\n  } else {\n    navHome?.classList.add('active');\n  }\n}\n\nfunction setupHeaderScroll() {\n  const header = document.querySelector('.header');\n  if (!header) return;\n\n  const isMobile = () => window.innerWidth < 768;\n\n  const handleScroll = () => {\n    if (isMobile() && window.scrollY > 0) {\n      header.classList.add('scrolled');\n    } else {\n      header.classList.remove('scrolled');\n    }\n  };\n\n  window.addEventListener('scroll', handleScroll, { passive: true });\n  window.addEventListener('resize', handleScroll, { passive: true });\n  handleScroll();\n}\n\nfunction setupSubscription() {\n  const subForm = document.getElementById('subscription-form');\n  if (subForm) {\n    subForm.addEventListener('submit', async e => {\n      e.preventDefault();\n      const email = subForm.email.value;\n      try {\n        await subscribe(email);\n        toast.success('Successfully subscribed!');\n        subForm.reset();\n      } catch (err) {\n        // Error toast is shown by API interceptor\n      }\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setActiveNav();\n  setupSubscription();\n  setupHeaderScroll();\n\n  // Initialize page-specific functionality based on elements present\n  if (document.getElementById('exercises-container')) {\n    initHomePage();\n  }\n\n  if (document.getElementById('favorites-container')) {\n    initFavoritesPage();\n  }\n});\n"],"names":["getTarget","openDialog","defaultOptions","toast","message","iziToast","BASE_URL","api","axios","errorMessages","response","error","status","_a","getQuote","data","getFilters","filter","page","limit","getExercises","bodypart","muscles","equipment","keyword","params","getExerciseById","id","updateRating","rating","email","review","body","subscribe","exerciseCardTemplate","categoryCardTemplate","favoritesEmptyTemplate","paginationTemplate","templates","templateCache","loadTemplate","templateName","replacePlaceholders","template","_match","key","renderQuote","quoteData","quoteText","quoteAuthor","renderExercises","exercises","containerId","container","exercisesHtml","exercise","renderCategories","categories","categoriesHtml","cat","renderSkeleton","view","count","skeletonHtml","renderPagination","currentPage","totalPages","firstLink","prevLink","nextLink","lastLink","pagesContainer","updateLinkState","pagesHtml","generatePageNumbers","link","isDisabled","pages","i","start","end","setupPagination","onPageChange","e","newPage","scrollToTop","targetId","target","openModal","modalId","modal","rect","closeModal","renderExerciseModal","gifElement","titleElement","ratingElement","fullStars","_","targetElement","bodyPartElement","equipmentElement","popularElement","caloriesElement","descriptionElement","showRatingModal","ratingModal","resetRatingForm","initRatingStars","hideRatingModal","ratingForm","ratingValue","starsContainer","selectedRating","getCurrentRating","checkedRadio","QUOTE_STORAGE_KEY","getTodayDate","getCachedQuote","cached","quote","author","date","today","cacheQuote","initQuote","err","FAVORITES_KEY","getFavorites","favorites","addFavorite","fav","removeFavorite","exerciseId","filtered","isFavorite","favoritesState","getPerPage","width","usePagination","renderEmptyState","renderFavorites","allFavorites","perPage","shouldPaginate","startIndex","endIndex","cardTemplate","cardsHtml","setupExerciseModal","closeBtn","giveRatingBtn","setupRatingModal","addToFavoritesBtn","handlePageChange","setupResizeListener","timeoutId","currentPerPage","newPerPage","initFavoritesPage","favoritesPage","setupFavoritesEventDelegation","deleteBtn","startBtn","appState","getLimit","initHomePage","mainContent","initialLimit","fetchAndRender","setupFilterTabs","setupExerciseCards","setupPaginationListeners","currentLimit","newLimit","filters","filterTabs","btn","t","hideExercisesHeader","exercisesContainer","categoryCard","categoryName","categoryFilter","showExercisesHeader","setupExerciseSearch","sectionTitle","searchForm","searchInput","clearBtn","updateFavoriteButton","setupBurgerMenu","burgerBtn","mobileMenu","mobileCloseBtn","openMobileMenu","closeMobileMenu","setActiveNavLink","currentPath","href","setActiveNav","path","navHome","navFavorites","setupHeaderScroll","header","isMobile","handleScroll","setupSubscription","subForm"],"mappings":"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"}