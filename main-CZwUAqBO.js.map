{"version":3,"file":"main-CZwUAqBO.js","sources":["../src/js/toast.js","../src/js/constants.js","../src/js/api.js","../src/partials/exercise-card.html?raw","../src/partials/category-card.html?raw","../src/partials/favorites-empty.html?raw","../src/partials/pagination.html?raw","../src/js/dom.js","../src/js/pagination.js","../src/js/modal.js","../src/js/favorites-service.js","../src/js/exercise-controller.js","../src/js/quote.js","../src/js/home.js","../src/js/favorites.js","../src/js/nav.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Get target selector for toast - use open dialog if exists (top layer), otherwise default (viewport)\nconst getTarget = () => {\n  const openDialog = document.querySelector('dialog[open]');\n  if (openDialog) {\n    // Return selector for the open dialog\n    if (openDialog.id) return `#${openDialog.id}`;\n    if (openDialog.className) return `dialog.${openDialog.className.split(' ')[0]}`;\n    return 'dialog[open]';\n  }\n  // Return empty string for default behavior - fixed positioning relative to viewport\n  return '';\n};\n\nconst defaultOptions = {\n  position: 'topRight',\n  timeout: 5000,\n};\n\nexport const toast = {\n  success(message) {\n    iziToast.success({\n      ...defaultOptions,\n      title: 'Success',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  error(message) {\n    iziToast.error({\n      ...defaultOptions,\n      title: 'Error',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  warning(message) {\n    iziToast.warning({\n      ...defaultOptions,\n      title: 'Warning',\n      message,\n      target: getTarget(),\n    });\n  },\n\n  info(message) {\n    iziToast.info({\n      ...defaultOptions,\n      title: 'Info',\n      message,\n      target: getTarget(),\n    });\n  },\n};\n","// API Configuration\nexport const API_BASE_URL = 'https://your-energy.b.goit.study/api';\n\n// Breakpoints (matches CSS)\nexport const BREAKPOINTS = {\n  TABLET: 768,\n  DESKTOP: 1440,\n};\n\n// Pagination limits per viewport\nexport const LIMITS = {\n  CATEGORIES_MOBILE: 9,\n  CATEGORIES_DESKTOP: 12,\n  EXERCISES_MOBILE: 8,\n  EXERCISES_TABLET: 10,\n  DEFAULT: 12,\n};\n\n// LocalStorage keys\nexport const STORAGE_KEYS = {\n  FAVORITES: 'favoriteExercises',\n  QUOTE: 'quote-of-the-day',\n};\n\n// Timing\nexport const DEBOUNCE_MS = 300;\n","import axios from 'axios';\nimport { toast } from './toast.js';\nimport { API_BASE_URL, LIMITS } from './constants.js';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n});\n\n// Error messages mapping\nconst errorMessages = {\n  400: 'Bad request. Please check your input.',\n  401: 'Unauthorized. Please log in.',\n  404: 'Resource not found.',\n  409: 'This email has already been used.',\n  500: 'Server error. Please try again later.',\n  default: 'Something went wrong. Please try again.',\n};\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  response => response,\n  error => {\n    // Handle network errors (no internet, server unreachable)\n    if (!error.response) {\n      const isOffline = !navigator.onLine;\n      const message = isOffline\n        ? 'No internet connection. Please check your network.'\n        : 'Unable to connect to server. Please try again later.';\n      toast.error(message);\n      return Promise.reject(error);\n    }\n\n    const status = error.response.status;\n    const serverMessage = error.response.data?.message;\n    const message = serverMessage || errorMessages[status] || errorMessages.default;\n\n    toast.error(message);\n\n    return Promise.reject(error);\n  }\n);\n\nexport const getQuote = async () => {\n  const { data } = await api.get('/quote');\n  return data;\n};\n\nexport const getFilters = async ({ filter, page = 1, limit = LIMITS.DEFAULT }) => {\n  const { data } = await api.get('/filters', {\n    params: { filter, page, limit },\n  });\n  return data;\n};\n\nexport const getExercises = async ({\n  bodypart,\n  muscles,\n  equipment,\n  keyword,\n  page = 1,\n  limit = LIMITS.EXERCISES_TABLET,\n}) => {\n  const params = { page, limit };\n  if (bodypart) params.bodypart = bodypart;\n  if (muscles) params.muscles = muscles;\n  if (equipment) params.equipment = equipment;\n  if (keyword) params.keyword = keyword;\n\n  const { data } = await api.get('/exercises', { params });\n  return data;\n};\n\nexport const getExerciseById = async id => {\n  const { data } = await api.get(`/exercises/${id}`);\n  return data;\n};\n\nexport const updateRating = async (id, rating, email, review = '') => {\n  const body = { rate: rating, email };\n  if (review) {\n    body.review = review;\n  }\n  const { data } = await api.patch(`/exercises/${id}/rating`, body);\n  return data;\n};\n\nexport const subscribe = async email => {\n  const { data } = await api.post('/subscription', { email });\n  return data;\n};\n","export default \"<li class=\\\"exercise-card {{cardClass}}\\\" data-id=\\\"{{id}}\\\">\\n  <div class=\\\"exercise-card-header\\\">\\n    <div class=\\\"exercise-card-left\\\">\\n      <span class=\\\"exercise-workout-badge\\\">WORKOUT</span>\\n      <span class=\\\"exercise-rating\\\" aria-label=\\\"Rating: {{ratingFormatted}} out of 5\\\">\\n        {{ratingFormatted}}\\n        <svg width=\\\"18\\\" height=\\\"18\\\" class=\\\"exercise-rating-star\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"#icon-star\\\"></use>\\n        </svg>\\n      </span>\\n      <button type=\\\"button\\\" class=\\\"favorite-delete-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Remove {{name}} from favorites\\\">\\n        <svg width=\\\"20\\\" height=\\\"20\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"#icon-trash\\\"></use>\\n        </svg>\\n      </button>\\n    </div>\\n    <button class=\\\"exercise-start-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Start exercise {{name}}\\\">\\n      Start\\n      <svg width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow\\\"></use>\\n      </svg>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"exercise-card-body\\\">\\n    <span class=\\\"exercise-icon\\\">\\n      <svg width=\\\"16px\\\" height=\\\"16px\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-quote\\\"></use>\\n      </svg>\\n    </span>\\n    <h3 class=\\\"exercise-card-title\\\">{{name}}</h3>\\n  </div>\\n\\n  <ul class=\\\"exercise-card-meta\\\">\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Burned calories:</span>\\n      <span class=\\\"meta-value\\\">{{burnedCalories}} / {{time}} min</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Body part:</span>\\n      <span class=\\\"meta-value\\\">{{bodyPart}}</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Target:</span>\\n      <span class=\\\"meta-value\\\">{{target}}</span>\\n    </li>\\n  </ul>\\n</li>\\n\"","export default \"<li class=\\\"category-card\\\" data-filter=\\\"{{filter}}\\\" data-name=\\\"{{name}}\\\">\\n  <img src=\\\"{{imgURL}}\\\" alt=\\\"\\\" class=\\\"category-card-bg\\\">\\n  <div class=\\\"category-card-overlay\\\"></div>\\n  <div class=\\\"category-card-content\\\">\\n    <h3 class=\\\"category-name\\\">\\n      <a href=\\\"#\\\" class=\\\"category-link\\\">{{name}}</a>\\n    </h3>\\n    <p class=\\\"category-filter\\\">{{filter}}</p>\\n  </div>\\n</li>\\n\"","export default \"<div class=\\\"favorites-empty\\\">\\n  <p class=\\\"favorites-empty-text\\\">\\n    It appears that you haven't added any exercises to your favorites yet. To get started, you can\\n    add exercises that you like to your favorites for easier access in the future.\\n  </p>\\n</div>\\n\"","export default \"<ul class=\\\"pagination-list\\\">\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-first\\\" data-page=\\\"1\\\" aria-label=\\\"Go to first page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pagination-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-prev\\\" aria-label=\\\"Go to previous page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pagination-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <ul class=\\\"pagination-numbers\\\"></ul>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-next\\\" aria-label=\\\"Go to next page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pagination-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pagination-btn pagination-last\\\" aria-label=\\\"Go to last page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pagination-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n</ul>\\n\"","// Import templates as raw strings\nimport exerciseCardTemplate from '../partials/exercise-card.html?raw';\nimport categoryCardTemplate from '../partials/category-card.html?raw';\nimport favoritesEmptyTemplate from '../partials/favorites-empty.html?raw';\nimport paginationTemplate from '../partials/pagination.html?raw';\n\n// Map of template names to raw HTML\nconst templates = {\n  'exercise-card': exerciseCardTemplate,\n  'category-card': categoryCardTemplate,\n  'favorites-empty': favoritesEmptyTemplate,\n  'pagination': paginationTemplate,\n};\n\n// Cache for loaded templates (kept for backward compatibility, though not strictly needed with imports)\nconst templateCache = { ...templates };\n\n/**\n * Load template from bundled imports\n * @param {string} templateName\n * @returns {Promise<string>}\n */\nexport const loadTemplate = async templateName => {\n  if (templateCache[templateName]) {\n    return templateCache[templateName];\n  }\n\n  console.warn(`Template not found in bundle: ${templateName}`);\n  return '';\n};\n\n/**\n * Replace placeholders in template with data\n * @param {string} template\n * @param {object} data\n * @returns {string}\n */\nexport const replacePlaceholders = (template, data) => {\n  return template.replace(/\\{\\{(\\w+)\\}\\}/g, (_match, key) => {\n    return data[key] !== undefined ? data[key] : '';\n  });\n};\n\nexport const renderQuote = quoteData => {\n  const quoteText = document.getElementById('quote-text');\n  const quoteAuthor = document.getElementById('quote-author');\n\n  if (quoteText && quoteData.quote) {\n    quoteText.textContent = quoteData.quote;\n  }\n  if (quoteAuthor && quoteData.author) {\n    quoteAuthor.textContent = quoteData.author;\n  }\n};\n\nexport const renderExercises = async (exercises, containerId) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (exercises.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No exercises found. Try another filter.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('exercise-card');\n\n  const exercisesHtml = exercises\n    .map(exercise => {\n      return replacePlaceholders(template, {\n        id: exercise._id,\n        rating: exercise.rating || 0,\n        ratingFormatted: exercise.rating ? exercise.rating.toFixed(1) : '0.0',\n        cardClass: '',\n        name: exercise.name,\n        burnedCalories: exercise.burnedCalories || 0,\n        time: exercise.time || 0,\n        bodyPart: exercise.bodyPart || 'N/A',\n        target: exercise.target || 'N/A',\n      });\n    })\n    .join('');\n\n  container.className = 'exercises-grid';\n  container.innerHTML = exercisesHtml;\n};\n\nexport const renderCategories = async (categories, containerId) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (categories.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No categories found.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('category-card');\n\n  const categoriesHtml = categories\n    .map(cat => {\n      return replacePlaceholders(template, {\n        filter: cat.filter,\n        name: cat.name,\n        imgURL: cat.imgURL || '',\n      });\n    })\n    .join('');\n\n  container.className = 'categories-grid';\n  container.innerHTML = categoriesHtml;\n};\n\n/**\n * Render skeleton loaders\n * @param {string} view - 'categories' or 'exercises'\n * @param {string} containerId - ID of container element\n * @param {number} count - Number of skeleton items to render\n */\nexport const renderSkeleton = (view, containerId, count = 9) => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  let skeletonHtml = '';\n\n  if (view === 'categories') {\n    skeletonHtml = Array(count)\n      .fill('<li class=\"category-skeleton skeleton-shimmer\"></li>')\n      .join('');\n    container.className = 'categories-grid';\n    container.innerHTML = skeletonHtml;\n  } else {\n    const item = `\n      <li class=\"exercise-skeleton\">\n        <div class=\"shimmer-header\">\n           <div class=\"shimmer-badge skeleton-shimmer\"></div>\n           <div class=\"shimmer-badge skeleton-shimmer\"></div>\n        </div>\n        <div class=\"shimmer-title skeleton-shimmer\"></div>\n        <div class=\"shimmer-line skeleton-shimmer\"></div>\n        <div class=\"shimmer-line skeleton-shimmer\"></div>\n      </li>\n    `;\n    skeletonHtml = Array(count).fill(item).join('');\n    container.className = 'exercises-grid';\n    container.innerHTML = skeletonHtml;\n  }\n};\n\n/**\n * Render skeleton for exercise modal\n */\nexport const renderExerciseSkeleton = () => {\n  const gifElement = document.getElementById('modal-exercise-gif');\n  const titleElement = document.getElementById('modal-exercise-title');\n  const ratingElement = document.getElementById('modal-exercise-rating');\n  const targetElement = document.getElementById('modal-target');\n  const bodyPartElement = document.getElementById('modal-bodypart');\n  const equipmentElement = document.getElementById('modal-equipment');\n  const popularElement = document.getElementById('modal-popular');\n  const caloriesElement = document.getElementById('modal-calories');\n  const descriptionElement = document.getElementById('modal-description');\n\n  if (gifElement) gifElement.src = 'data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%3E%3C/svg%3E';\n  if (titleElement) titleElement.textContent = 'Loading...';\n  if (ratingElement) ratingElement.innerHTML = '<div class=\"skeleton-shimmer\" style=\"width: 100px; height: 20px; border-radius: 4px;\"></div>';\n\n  const skeletonText = '<span class=\"skeleton-shimmer\" style=\"display: inline-block; width: 60px; height: 14px; border-radius: 2px;\"></span>';\n  if (targetElement) targetElement.innerHTML = skeletonText;\n  if (bodyPartElement) bodyPartElement.innerHTML = skeletonText;\n  if (equipmentElement) equipmentElement.innerHTML = skeletonText;\n  if (popularElement) popularElement.innerHTML = skeletonText;\n  if (caloriesElement) caloriesElement.innerHTML = skeletonText;\n\n  if (descriptionElement) {\n    descriptionElement.innerHTML = `\n      <div class=\"skeleton-shimmer\" style=\"width: 100%; height: 14px; border-radius: 2px; margin-bottom: 8px;\"></div>\n      <div class=\"skeleton-shimmer\" style=\"width: 90%; height: 14px; border-radius: 2px; margin-bottom: 8px;\"></div>\n      <div class=\"skeleton-shimmer\" style=\"width: 40%; height: 14px; border-radius: 2px;\"></div>\n    `;\n  }\n};\n\n/**\n * Defers non-critical tasks until after page load\n * Uses requestIdleCallback when available, falls back to setTimeout\n * @param {Function} task - Async or sync function to execute\n * @param {Object} options - Configuration options\n * @param {number} options.timeout - Maximum wait time in ms (default: 2000)\n */\nexport function runAfterLoad(task, { timeout = 2000 } = {}) {\n  const run = () => {\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(() => task(), { timeout });\n    } else {\n      setTimeout(() => task(), 1);\n    }\n  };\n\n  if (document.readyState === 'complete') {\n    run();\n  } else {\n    window.addEventListener('load', run, { once: true });\n  }\n}\n","/**\n * Pagination module\n * Handles pagination UI rendering and user interactions\n */\n\nimport { loadTemplate } from './dom.js';\n\n/**\n * Render pagination controls\n * @param {number} currentPage - Current page number\n * @param {number} totalPages - Total number of pages\n * @param {string} containerId - ID of container element\n */\nexport const renderPagination = async (currentPage, totalPages, containerId = 'pagination-container') => {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (totalPages <= 1) {\n    container.innerHTML = '';\n    return;\n  }\n\n  // Load template if not exists\n  if (!container.querySelector('.pagination-list')) {\n    const template = await loadTemplate('pagination');\n    container.innerHTML = template;\n  }\n\n  // Get navigation links from markup\n  const firstLink = container.querySelector('.pagination-first');\n  const prevLink = container.querySelector('.pagination-prev');\n  const nextLink = container.querySelector('.pagination-next');\n  const lastLink = container.querySelector('.pagination-last');\n  const pagesContainer = container.querySelector('.pagination-numbers');\n\n  // Update navigation links state\n  updateLinkState(firstLink, currentPage === 1, 1);\n  updateLinkState(prevLink, currentPage === 1, currentPage - 1);\n  updateLinkState(nextLink, currentPage === totalPages, currentPage + 1);\n  updateLinkState(lastLink, currentPage === totalPages, totalPages);\n\n  // Generate pages array with ellipsis logic\n  const pages = generatePageNumbers(currentPage, totalPages);\n\n  // Build pages HTML with semantic list items\n  const pagesHtml = pages\n    .map(page => {\n      if (page === '...') {\n        return `<li aria-hidden=\"true\"><span class=\"pagination-dots\">...</span></li>`;\n      }\n      const isActive = page === currentPage;\n      if (isActive) {\n        return `<li><a href=\"#\" class=\"pagination-number current\" aria-current=\"page\">${page}</a></li>`;\n      }\n      return `<li><a href=\"#\" class=\"pagination-number\" data-page=\"${page}\">${page}</a></li>`;\n    })\n    .join('');\n\n  pagesContainer.innerHTML = pagesHtml;\n};\n\n/**\n * Update link state (disabled/enabled)\n * @param {HTMLElement} link - Link element\n * @param {boolean} isDisabled - Whether link should be disabled\n * @param {number} page - Page number for data attribute\n */\nfunction updateLinkState(link, isDisabled, page) {\n  if (isDisabled) {\n    link.classList.add('disabled');\n    link.setAttribute('aria-disabled', 'true');\n    link.removeAttribute('data-page');\n  } else {\n    link.classList.remove('disabled');\n    link.removeAttribute('aria-disabled');\n    link.dataset.page = page;\n  }\n}\n\n/**\n * Generate array of page numbers with ellipsis\n * Shows only 3 numbers: previous, current, next (without first and last)\n * @param {number} currentPage - Current page number\n * @param {number} totalPages - Total number of pages\n * @returns {Array} Array of page numbers and ellipsis\n */\nfunction generatePageNumbers(currentPage, totalPages) {\n  const pages = [];\n\n  // If 3 or fewer pages, show all\n  if (totalPages <= 3) {\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push(i);\n    }\n    return pages;\n  }\n\n  // Determine which 3 numbers to show\n  let start, end;\n\n  if (currentPage === 1) {\n    // Current is first: show 1, 2, 3\n    start = 1;\n    end = 3;\n  } else if (currentPage === totalPages) {\n    // Current is last: show (last-2), (last-1), last\n    start = totalPages - 2;\n    end = totalPages;\n  } else {\n    // Current in middle: show prev, current, next\n    start = currentPage - 1;\n    end = currentPage + 1;\n  }\n\n  // Add ellipsis before if needed\n  if (start > 1) {\n    pages.push('...');\n  }\n\n  // Add the 3 page numbers\n  for (let i = start; i <= end; i++) {\n    pages.push(i);\n  }\n\n  // Add ellipsis after if needed\n  if (end < totalPages) {\n    pages.push('...');\n  }\n\n  return pages;\n}\n\n/**\n * Setup pagination event listeners\n * @param {Function} onPageChange - Callback function when page changes\n * @param {string} containerId - ID of container element\n */\nexport function setupPagination(onPageChange, containerId = 'pagination-container') {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  // Check if already has listener to prevent duplicates\n  if (container.dataset.listenerAttached === 'true') return;\n  container.dataset.listenerAttached = 'true';\n\n  container.addEventListener('click', e => {\n    const link = e.target.closest('.pagination-number, .pagination-btn');\n\n    if (!link) return;\n    if (link.classList.contains('disabled') || link.classList.contains('current')) return;\n\n    e.preventDefault();\n\n    const newPage = Number(link.dataset.page);\n    if (newPage && !isNaN(newPage)) {\n      onPageChange(newPage);\n    }\n  });\n}\n\n/**\n * Scroll to top of content area\n * @param {string} targetId - ID of element to scroll to\n */\nexport function scrollToTop(targetId = 'exercises-header') {\n  const target = document.getElementById(targetId);\n  if (target) {\n    target.scrollIntoView({ behavior: 'smooth' });\n  } else {\n    document.querySelector('.exercises-section')?.scrollIntoView({ behavior: 'smooth' });\n  }\n}\n","// Modal management functions\nexport const openModal = modalId => {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.showModal();\n    // No need to manually manage focus or aria-hidden with dialog\n    \n    // Add backdrop click listener if not already attached\n    if (modal.dataset.backdropListener !== 'true') {\n      modal.addEventListener('click', (e) => {\n        if (e.target === modal) {\n          modal.close();\n        }\n      });\n      modal.dataset.backdropListener = 'true';\n    }\n  }\n};\n\nexport const closeModal = modalId => {\n  const modal = document.getElementById(modalId);\n  if (modal) {\n    modal.close();\n  }\n};\n\n// Render exercise details in modal\nexport const renderExerciseModal = exercise => {\n  if (!exercise) return;\n\n  // Update GIF\n  const gifElement = document.getElementById('modal-exercise-gif');\n  if (gifElement) {\n    gifElement.src = exercise.gifUrl || '';\n    gifElement.alt = exercise.name || 'Exercise';\n  }\n\n  // Update title\n  const titleElement = document.getElementById('modal-exercise-title');\n  if (titleElement) {\n    titleElement.textContent = exercise.name || 'Exercise';\n  }\n\n  // Update rating\n  const ratingElement = document.getElementById('modal-exercise-rating');\n  if (ratingElement) {\n    const rating = exercise.rating || 0;\n    const fullStars = Math.floor(rating);\n\n    ratingElement.innerHTML = `\n      <span class=\"rating-value\">${rating.toFixed(1)}</span>\n      <div class=\"rating-stars\">\n        ${Array.from({ length: 5 }, (_, i) => {\n          const filled = i < fullStars ? 'filled' : '';\n          return `<svg class=\"star ${filled}\" width=\"18\" height=\"18\" aria-hidden=\"true\">\n            <use href=\"#icon-star\"></use>\n          </svg>`;\n        }).join('')}\n      </div>\n    `;\n  }\n\n  // Update details\n  const targetElement = document.getElementById('modal-target');\n  if (targetElement) targetElement.textContent = exercise.target || 'N/A';\n\n  const bodyPartElement = document.getElementById('modal-bodypart');\n  if (bodyPartElement) bodyPartElement.textContent = exercise.bodyPart || 'N/A';\n\n  const equipmentElement = document.getElementById('modal-equipment');\n  if (equipmentElement) equipmentElement.textContent = exercise.equipment || 'N/A';\n\n  const popularElement = document.getElementById('modal-popular');\n  if (popularElement) popularElement.textContent = exercise.popularity || '0';\n\n  const caloriesElement = document.getElementById('modal-calories');\n  if (caloriesElement) {\n    caloriesElement.textContent = `${exercise.burnedCalories || 0}/${exercise.time || 0} min`;\n  }\n\n  // Update description\n  const descriptionElement = document.getElementById('modal-description');\n  if (descriptionElement) {\n    descriptionElement.textContent = exercise.description || 'No description available.';\n  }\n\n  // Store exercise ID for later use (favorites, rating)\n  const modal = document.getElementById('exercise-modal');\n  if (modal) {\n    modal.dataset.exerciseId = exercise._id;\n  }\n};\n\n// Show rating modal\nexport const showRatingModal = () => {\n  closeModal('exercise-modal');\n  const ratingModal = document.getElementById('rating-modal');\n\n  // Add close event listener once to reset form when modal closes (any method)\n  if (ratingModal && ratingModal.dataset.closeListener !== 'true') {\n    ratingModal.addEventListener('close', resetRatingForm);\n    ratingModal.dataset.closeListener = 'true';\n  }\n\n  openModal('rating-modal');\n  resetRatingForm();\n  initRatingStars();\n};\n\n// Hide rating modal and return to main screen\nexport const hideRatingModal = () => {\n  closeModal('rating-modal');\n};\n\n// Reset rating form\nconst resetRatingForm = () => {\n  const ratingForm = document.getElementById('rating-form');\n  const ratingValue = document.getElementById('rating-display-value');\n\n  if (ratingForm) ratingForm.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n};\n\n// Initialize rating stars interaction\nexport const initRatingStars = () => {\n  const starsContainer = document.getElementById('rating-stars');\n  const ratingValue = document.getElementById('rating-display-value');\n\n  if (!starsContainer) return;\n\n  // Check if already has listener to prevent duplicates\n  if (starsContainer.dataset.listenerAttached === 'true') return;\n  starsContainer.dataset.listenerAttached = 'true';\n\n  // Update rating display when radio changes\n  starsContainer.addEventListener('change', (e) => {\n    if (e.target.type === 'radio') {\n      const selectedRating = parseFloat(e.target.value);\n      if (ratingValue) {\n        ratingValue.textContent = selectedRating.toFixed(1);\n      }\n    }\n  });\n};\n\n// Get current rating value from radio buttons\nexport const getCurrentRating = () => {\n  const checkedRadio = document.querySelector('#rating-stars input[name=\"rating\"]:checked');\n  return checkedRadio ? parseFloat(checkedRadio.value) : 0;\n};\n","// Favorites Service - localStorage operations\n// НЕ працює з DOM, тільки зберігає/читає дані\n\nimport { STORAGE_KEYS } from './constants.js';\n\n// Get all favorites from localStorage\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(STORAGE_KEYS.FAVORITES);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (err) {\n    console.error('Failed to get favorites:', err);\n    return [];\n  }\n}\n\n// Add exercise to favorites\nexport function addFavorite(exercise) {\n  try {\n    const favorites = getFavorites();\n\n    if (favorites.some(fav => fav._id === exercise._id)) {\n      return false;\n    }\n\n    favorites.push(exercise);\n    localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(favorites));\n    return true;\n  } catch (err) {\n    console.error('Failed to add favorite:', err);\n    return false;\n  }\n}\n\n// Remove exercise from favorites\nexport function removeFavorite(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filtered = favorites.filter(fav => fav._id !== exerciseId);\n    localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(filtered));\n    return true;\n  } catch (err) {\n    console.error('Failed to remove favorite:', err);\n    return false;\n  }\n}\n\n// Check if exercise is in favorites\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.some(fav => fav._id === exerciseId);\n}\n\n// Toggle favorite status\nexport function toggleFavorite(exercise) {\n  if (isFavorite(exercise._id)) {\n    return removeFavorite(exercise._id);\n  } else {\n    return addFavorite(exercise);\n  }\n}\n","// Exercise Modal Handler\n// Відповідає за обробку подій модалки вправи\n\nimport { getExerciseById, updateRating } from './api.js';\nimport {\n  openModal,\n  closeModal,\n  renderExerciseModal,\n  showRatingModal,\n  hideRatingModal,\n  getCurrentRating,\n} from './modal.js';\nimport { renderExerciseSkeleton } from './dom.js';\nimport { addFavorite, removeFavorite, isFavorite } from './favorites-service.js';\nimport { toast } from './toast.js';\n\n// Open exercise modal with skeleton and fetch\nexport async function openExerciseModal(exerciseId, options = {}) {\n  openModal('exercise-modal');\n  renderExerciseSkeleton();\n\n  try {\n    const exercise = await getExerciseById(exerciseId);\n    renderExerciseModal(exercise);\n    setupExerciseModalHandlers(exerciseId, options);\n  } catch (err) {\n    console.error(`Failed to fetch exercise details for ${exerciseId}:`, err);\n    closeModal('exercise-modal');\n  }\n}\n\n// Setup exercise modal event handlers\nfunction setupExerciseModalHandlers(exerciseId, options = {}) {\n  const { onRemoveFavorite, isFavoritesPage = false } = options;\n\n  // Close button\n  const closeBtn = document.getElementById('modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => closeModal('exercise-modal');\n  }\n\n  // Rating button\n  const giveRatingBtn = document.getElementById('give-rating-btn');\n  if (giveRatingBtn) {\n    giveRatingBtn.onclick = () => {\n      showRatingModal();\n      setupRatingModalHandlers(exerciseId);\n    };\n  }\n\n  // Favorites button\n  const addToFavoritesBtn = document.getElementById('add-to-favorites-btn');\n  if (addToFavoritesBtn) {\n    const updateFavoriteButton = () => {\n      if (isFavorite(exerciseId)) {\n        addToFavoritesBtn.innerHTML = `\n          <span class=\"btn-text\">Remove from favorites</span>\n          <svg width=\"20\" height=\"20\" aria-hidden=\"true\">\n            <use href=\"#icon-trash\"></use>\n          </svg>\n        `;\n      } else {\n        addToFavoritesBtn.innerHTML = `\n          <span class=\"btn-text\">Add to favorites</span>\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" aria-hidden=\"true\">\n            <path d=\"M10 3.5C10 3.5 6.5 1 3.5 3.5C0.5 6 2 10 10 16.5C18 10 19.5 6 16.5 3.5C13.5 1 10 3.5 10 3.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n          </svg>\n        `;\n      }\n    };\n\n    addToFavoritesBtn.onclick = async () => {\n      if (isFavorite(exerciseId)) {\n        removeFavorite(exerciseId);\n        if (isFavoritesPage) {\n          closeModal('exercise-modal');\n          if (onRemoveFavorite) onRemoveFavorite();\n        } else {\n          updateFavoriteButton();\n        }\n      } else {\n        const exercise = await getExerciseById(exerciseId);\n        addFavorite(exercise);\n        updateFavoriteButton();\n      }\n    };\n\n    updateFavoriteButton();\n  }\n}\n\n// Setup rating modal event handlers\nfunction setupRatingModalHandlers(exerciseId) {\n  const closeBtn = document.getElementById('rating-modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => hideRatingModal();\n  }\n\n  const ratingForm = document.getElementById('rating-form');\n  if (ratingForm) {\n    ratingForm.onsubmit = async e => {\n      e.preventDefault();\n\n      if (!ratingForm.checkValidity()) {\n        ratingForm.reportValidity();\n        return;\n      }\n\n      const rating = getCurrentRating();\n      const email = ratingForm.email.value.trim();\n      const review = ratingForm.review?.value.trim() || '';\n\n      try {\n        await updateRating(exerciseId, rating, email, review);\n        hideRatingModal();\n        toast.success('Rating submitted successfully!');\n      } catch (err) {\n        console.error('Failed to submit rating:', err);\n      }\n    };\n  }\n}\n","import { getQuote } from './api.js';\nimport { renderQuote } from './dom.js';\nimport { STORAGE_KEYS } from './constants.js';\n\n/**\n * Get today's date in YYYY-MM-DD format\n */\nfunction getTodayDate() {\n  const today = new Date();\n  return today.toISOString().split('T')[0];\n}\n\n/**\n * Get cached quote from localStorage\n */\nfunction getCachedQuote() {\n  try {\n    const cached = localStorage.getItem(STORAGE_KEYS.QUOTE);\n    if (!cached) return null;\n\n    const { quote, author, date } = JSON.parse(cached);\n    const today = getTodayDate();\n\n    if (date === today) {\n      return { quote, author };\n    }\n\n    localStorage.removeItem(STORAGE_KEYS.QUOTE);\n    return null;\n  } catch (error) {\n    console.error('Error reading cached quote:', error);\n    return null;\n  }\n}\n\n/**\n * Save quote to localStorage\n */\nfunction cacheQuote(quote, author) {\n  try {\n    const data = {\n      quote,\n      author,\n      date: getTodayDate(),\n    };\n    localStorage.setItem(STORAGE_KEYS.QUOTE, JSON.stringify(data));\n  } catch (error) {\n    console.error('Error caching quote:', error);\n  }\n}\n\n/**\n * Initialize Quote of the Day\n * Checks cache first, otherwise fetches from API\n */\nexport async function initQuote() {\n  try {\n    let quoteData = getCachedQuote();\n\n    if (!quoteData) {\n      quoteData = await getQuote();\n      cacheQuote(quoteData.quote, quoteData.author);\n    }\n\n    renderQuote(quoteData);\n  } catch (err) {\n    console.error('Failed to initialize quote:', err);\n  }\n}\n","import { getFilters, getExercises } from './api.js';\nimport { renderCategories, renderExercises, renderSkeleton, runAfterLoad } from './dom.js';\nimport {\n  renderPagination,\n  setupPagination as setupPaginationListeners,\n  scrollToTop,\n} from './pagination.js';\nimport { openExerciseModal } from './exercise-controller.js';\nimport { initQuote } from './quote.js';\nimport { BREAKPOINTS, LIMITS, DEBOUNCE_MS } from './constants.js';\n\n// State object\nconst appState = {\n  view: 'categories', // 'categories' or 'exercises'\n  filter: 'Muscles',  // Active tab\n  category: null,     // Selected category name\n  categoryFilter: null, // The filter type of the selected category (e.g. 'Muscles')\n  keyword: '',\n  page: 1\n};\n\n// Get items limit based on screen width and view type\nconst getLimit = () => {\n  const width = window.innerWidth;\n\n  if (appState.view === 'categories') {\n    return width < BREAKPOINTS.TABLET ? LIMITS.CATEGORIES_MOBILE : LIMITS.CATEGORIES_DESKTOP;\n  } else {\n    return width < BREAKPOINTS.TABLET ? LIMITS.EXERCISES_MOBILE : LIMITS.EXERCISES_TABLET;\n  }\n};\n\n// Initialize home page\nexport function initHomePage() {\n  const mainContent = document.querySelector('.main-content');\n\n  // Render initial skeletons immediately (sync - critical for perceived performance)\n  const initialLimit = getLimit();\n  renderSkeleton(appState.view, 'exercises-container', initialLimit);\n\n  // Setup event listeners immediately (sync - critical for interactivity)\n  setupFilterTabs();\n  setupExerciseCards();\n  setupPaginationListeners(handlePageChange);\n  setupResizeListener();\n\n  // Mark as loaded immediately\n  if (mainContent) {\n    mainContent.classList.add('loaded');\n  }\n\n  // Defer async operations (non-critical for initial render)\n  runAfterLoad(async () => {\n    try {\n      await initQuote();\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Error initializing home page:', err);\n    }\n  });\n}\n\n// Setup window resize listener to update limit and re-fetch if needed\nfunction setupResizeListener() {\n  let timeoutId;\n  let currentLimit = getLimit();\n\n  window.addEventListener('resize', () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      const newLimit = getLimit();\n      if (newLimit !== currentLimit) {\n        currentLimit = newLimit;\n        appState.page = 1;\n        fetchAndRender();\n      }\n    }, DEBOUNCE_MS);\n  });\n}\n\n// Fetch and render based on current state\nasync function fetchAndRender() {\n  const container = document.getElementById('exercises-container');\n\n  try {\n    const limit = getLimit();\n    renderSkeleton(appState.view, 'exercises-container', limit);\n\n    if (appState.view === 'categories') {\n      // Fetch Categories\n      const filters = await getFilters({\n        filter: appState.filter,\n        page: appState.page,\n        limit\n      });\n      renderCategories(filters.results, 'exercises-container');\n      renderPagination(filters.page ? Number(filters.page) : 1, filters.totalPages || 1);\n    } else {\n      // Fetch Exercises\n      const params = {\n        limit,\n        page: appState.page\n      };\n\n      if (appState.categoryFilter === 'Muscles') params.muscles = appState.category.toLowerCase();\n      else if (appState.categoryFilter === 'Body parts') params.bodypart = appState.category.toLowerCase();\n      else if (appState.categoryFilter === 'Equipment') params.equipment = appState.category.toLowerCase();\n\n      if (appState.keyword) params.keyword = appState.keyword;\n\n      const exercises = await getExercises(params);\n      renderExercises(exercises.results, 'exercises-container');\n      renderPagination(exercises.page ? Number(exercises.page) : 1, exercises.totalPages || 1);\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    if (container) container.innerHTML = '<p class=\"error-message\">Failed to load data. Please try again.</p>';\n  }\n}\n\n// Handle page change from pagination\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== appState.page) {\n    appState.page = newPage;\n    fetchAndRender();\n    scrollToTop();\n  }\n}\n\n// Setup filter tabs\nfunction setupFilterTabs() {\n  const filterTabs = document.getElementById('filter-tabs');\n  if (!filterTabs) return;\n\n  // Check if already has listener to prevent duplicates\n  if (filterTabs.dataset.listenerAttached === 'true') return;\n  filterTabs.dataset.listenerAttached = 'true';\n\n  filterTabs.addEventListener('click', async e => {\n    const btn = e.target.closest('.filter-tab');\n    if (!btn) return;\n\n    document.querySelectorAll('.filter-tab').forEach(t => {\n      t.classList.remove('active');\n    });\n    btn.classList.add('active');\n\n    // Update state\n    appState.filter = btn.dataset.filter;\n    appState.view = 'categories';\n    appState.page = 1;\n    appState.keyword = '';\n    appState.category = null;\n\n    hideExercisesHeader();\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch data:', err);\n    }\n  });\n}\n\n// Setup exercise cards (and category clicks)\nfunction setupExerciseCards() {\n  const exercisesContainer = document.getElementById('exercises-container');\n  if (!exercisesContainer) return;\n\n  // Check if already has listener to prevent duplicates\n  if (exercisesContainer.dataset.listenerAttached === 'true') return;\n  exercisesContainer.dataset.listenerAttached = 'true';\n\n  exercisesContainer.addEventListener('click', async e => {\n    // Handle category card clicks\n    const categoryCard = e.target.closest('.category-card');\n    if (categoryCard) {\n      e.preventDefault();\n      const categoryName = categoryCard.dataset.name;\n      const categoryFilter = categoryCard.dataset.filter;\n\n      if (!categoryName) return;\n\n      // Update state\n      appState.view = 'exercises';\n      appState.category = categoryName;\n      appState.categoryFilter = categoryFilter; // Use the filter from the card!\n      appState.page = 1;\n      appState.keyword = '';\n\n      showExercisesHeader(categoryName);\n      setupExerciseSearch(); // Re-init search\n\n      try {\n        await fetchAndRender();\n      } catch (err) {\n        console.error('Failed to fetch exercises:', err);\n      }\n      return;\n    }\n\n    // Handle Start button clicks\n    const startBtn = e.target.closest('.exercise-start-btn');\n    if (startBtn) {\n      const exerciseId = startBtn.dataset.id;\n      if (!exerciseId) return;\n      await openExerciseModal(exerciseId);\n    }\n  });\n}\n\n\n// Show exercises header with breadcrumb\nfunction showExercisesHeader(categoryName) {\n  const sectionTitle = document.getElementById('section-title');\n  const searchForm = document.getElementById('exercise-search-form');\n  \n  if (sectionTitle) {\n    sectionTitle.innerHTML = `Exercises / <span class=\"category-name\">${categoryName}</span>`;\n  }\n  \n  if (searchForm) {\n    searchForm.classList.remove('hidden');\n  }\n}\n\n// Hide exercises header\nfunction hideExercisesHeader() {\n  const sectionTitle = document.getElementById('section-title');\n  const searchForm = document.getElementById('exercise-search-form');\n  const searchInput = document.getElementById('exercise-search-input');\n  const clearBtn = document.getElementById('exercise-clear-btn');\n  \n  if (sectionTitle) {\n    sectionTitle.textContent = 'Exercises';\n  }\n  \n  if (searchForm) {\n    searchForm.classList.add('hidden');\n  }\n  \n  // Clear search input and hide clear button\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  \n  if (clearBtn) {\n    clearBtn.classList.add('hidden');\n  }\n}\n\n// Setup exercise search\nfunction setupExerciseSearch() {\n  const searchForm = document.getElementById('exercise-search-form');\n  const searchInput = document.getElementById('exercise-search-input');\n  const clearBtn = document.getElementById('exercise-clear-btn');\n\n  if (!searchForm || !searchInput) return;\n\n  // Check if already has listener to prevent duplicates\n  if (searchForm.dataset.listenerAttached === 'true') return;\n  searchForm.dataset.listenerAttached = 'true';\n\n  // Show/hide clear button based on input\n  searchInput.addEventListener('input', () => {\n    if (searchInput.value.trim()) {\n      clearBtn.classList.remove('hidden');\n    } else {\n      clearBtn.classList.add('hidden');\n    }\n  });\n\n  // Clear button click\n  clearBtn.addEventListener('click', async () => {\n    searchInput.value = '';\n    clearBtn.classList.add('hidden');\n    searchInput.focus();\n\n    // Update state and re-fetch\n    appState.keyword = '';\n    appState.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch exercises:', err);\n    }\n  });\n\n  // Search form submit\n  searchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const keyword = searchInput.value.trim();\n\n    // Update state and re-fetch\n    appState.keyword = keyword;\n    appState.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to search exercises:', err);\n    }\n  });\n}\n\n","// Favorites Page\n// Сторінка — \"диригент\", збирає все разом\n\nimport { loadTemplate, replacePlaceholders, runAfterLoad } from './dom.js';\nimport { initQuote } from './quote.js';\nimport { renderPagination, setupPagination } from './pagination.js';\nimport { openExerciseModal } from './exercise-controller.js';\nimport { getFavorites, removeFavorite } from './favorites-service.js';\nimport { BREAKPOINTS, LIMITS, DEBOUNCE_MS } from './constants.js';\n\n// Re-export service functions for other modules\nexport { getFavorites, addFavorite, removeFavorite, isFavorite, toggleFavorite } from './favorites-service.js';\n\n// Page state\nconst state = {\n  page: 1,\n};\n\n// Get items per page based on screen width\nfunction getPerPage() {\n  const width = window.innerWidth;\n  if (width >= BREAKPOINTS.DESKTOP) return Infinity;\n  if (width >= BREAKPOINTS.TABLET) return LIMITS.EXERCISES_TABLET;\n  return LIMITS.EXERCISES_MOBILE;\n}\n\n// Check if we should use pagination\nfunction usePagination() {\n  return window.innerWidth < BREAKPOINTS.DESKTOP;\n}\n\n// Render empty state\nasync function renderEmptyState(container) {\n  const template = await loadTemplate('favorites-empty');\n  container.innerHTML = template;\n}\n\n// Render favorites list\nasync function renderFavorites() {\n  const container = document.getElementById('favorites-container');\n  if (!container) return;\n\n  const allFavorites = getFavorites();\n\n  if (allFavorites.length === 0) {\n    await renderEmptyState(container);\n    renderPagination(1, 1, 'favorites-pagination');\n    return;\n  }\n\n  const perPage = getPerPage();\n  const shouldPaginate = usePagination();\n  const totalPages = shouldPaginate ? Math.ceil(allFavorites.length / perPage) : 1;\n\n  if (state.page > totalPages) {\n    state.page = totalPages;\n  }\n\n  const startIndex = shouldPaginate ? (state.page - 1) * perPage : 0;\n  const endIndex = shouldPaginate ? startIndex + perPage : allFavorites.length;\n  const favorites = allFavorites.slice(startIndex, endIndex);\n\n  const cardTemplate = await loadTemplate('exercise-card');\n\n  const cardsHtml = favorites\n    .map(exercise => {\n      return replacePlaceholders(cardTemplate, {\n        id: exercise._id,\n        name: exercise.name,\n        burnedCalories: exercise.burnedCalories || 0,\n        time: exercise.time || 0,\n        bodyPart: exercise.bodyPart || 'N/A',\n        target: exercise.target || 'N/A',\n        rating: exercise.rating || 0,\n        ratingFormatted: exercise.rating ? exercise.rating.toFixed(1) : '0.0',\n        cardClass: 'is-favorite',\n      });\n    })\n    .join('');\n\n  container.className = 'favorites-grid';\n  container.innerHTML = cardsHtml;\n\n  if (shouldPaginate) {\n    renderPagination(state.page, totalPages, 'favorites-pagination');\n  }\n}\n\n// Handle page change\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== state.page) {\n    state.page = newPage;\n    renderFavorites();\n  }\n}\n\n// Setup resize listener\nfunction setupResizeListener() {\n  let timeoutId;\n  let currentPerPage = getPerPage();\n\n  window.addEventListener('resize', () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      const newPerPage = getPerPage();\n      if (newPerPage !== currentPerPage) {\n        currentPerPage = newPerPage;\n        state.page = 1;\n        renderFavorites();\n      }\n    }, DEBOUNCE_MS);\n  });\n}\n\n// Setup event delegation for favorites container\nfunction setupEventHandlers() {\n  const container = document.getElementById('favorites-container');\n  if (!container) return;\n\n  if (container.dataset.listenerAttached === 'true') return;\n  container.dataset.listenerAttached = 'true';\n\n  container.addEventListener('click', async (e) => {\n    // Delete button\n    const deleteBtn = e.target.closest('.favorite-delete-btn');\n    if (deleteBtn) {\n      e.stopPropagation();\n      const exerciseId = deleteBtn.dataset.id;\n      if (exerciseId) {\n        removeFavorite(exerciseId);\n        await renderFavorites();\n      }\n      return;\n    }\n\n    // Start button\n    const startBtn = e.target.closest('.exercise-start-btn');\n    if (startBtn) {\n      e.stopPropagation();\n      const exerciseId = startBtn.dataset.id;\n      if (!exerciseId) return;\n\n      await openExerciseModal(exerciseId, {\n        isFavoritesPage: true,\n        onRemoveFavorite: () => renderFavorites(),\n      });\n    }\n  });\n}\n\n// Initialize favorites page\nexport function initFavoritesPage() {\n  const favoritesPage = document.querySelector('.favorites-page');\n\n  // Setup event listeners immediately (sync - critical for interactivity)\n  setupEventHandlers();\n  setupPagination(handlePageChange, 'favorites-pagination');\n  setupResizeListener();\n\n  // Mark as loaded immediately\n  if (favoritesPage) {\n    favoritesPage.classList.add('loaded');\n  }\n\n  // Defer async operations (non-critical for initial render)\n  runAfterLoad(async () => {\n    try {\n      await initQuote();\n      await renderFavorites();\n    } catch (err) {\n      console.error('Error initializing favorites page:', err);\n    }\n  });\n}\n","// Burger menu functionality\nfunction setupBurgerMenu() {\n  const burgerBtn = document.getElementById('burger-btn');\n  const mobileMenu = document.getElementById('mobile-menu');\n  const mobileCloseBtn = document.getElementById('mobile-close-btn');\n\n  if (!burgerBtn || !mobileMenu || !mobileCloseBtn) return;\n\n  burgerBtn.addEventListener('click', openMobileMenu);\n  mobileCloseBtn.addEventListener('click', closeMobileMenu);\n\n  // Close on backdrop click (native dialog backdrop)\n  mobileMenu.addEventListener('click', e => {\n    if (e.target === mobileMenu) {\n      closeMobileMenu();\n    }\n  });\n\n  // Close on navigation link click\n  const mobileNavLinks = mobileMenu.querySelectorAll('.mobile-nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  });\n\n  // Native dialog handles Escape key automatically\n  mobileMenu.addEventListener('close', () => {\n    burgerBtn.setAttribute('aria-expanded', 'false');\n    document.body.style.overflow = '';\n  });\n}\n\nfunction openMobileMenu() {\n  const mobileMenu = document.getElementById('mobile-menu');\n  const burgerBtn = document.getElementById('burger-btn');\n\n  if (mobileMenu) {\n    mobileMenu.showModal();\n    document.body.style.overflow = 'hidden';\n  }\n\n  if (burgerBtn) {\n    burgerBtn.setAttribute('aria-expanded', 'true');\n  }\n}\n\nfunction closeMobileMenu() {\n  const mobileMenu = document.getElementById('mobile-menu');\n\n  if (mobileMenu) {\n    mobileMenu.close();\n  }\n}\n\n// Set active navigation link based on current page\nfunction setActiveNavLink() {\n  const currentPath = window.location.pathname;\n  const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');\n\n  navLinks.forEach(link => {\n    const href = link.getAttribute('href');\n    const isActive = currentPath.endsWith(href.replace('./', '/')) ||\n                     (currentPath.endsWith('/') && href.includes('index.html')) ||\n                     (currentPath.endsWith('/index.html') && href.includes('index.html')) ||\n                     (currentPath.includes('favorites') && href.includes('favorites'));\n\n    if (isActive) {\n      link.setAttribute('aria-current', 'page');\n      link.classList.add('active');\n    } else {\n      link.removeAttribute('aria-current');\n      link.classList.remove('active');\n    }\n  });\n}\n\n// Initialize navigation\ndocument.addEventListener('DOMContentLoaded', () => {\n  setupBurgerMenu();\n  setActiveNavLink();\n});\n","import { initHomePage } from './js/home.js';\nimport { initFavoritesPage } from './js/favorites.js';\nimport { subscribe } from './js/api.js';\nimport { toast } from './js/toast.js';\nimport './js/nav.js';\n\nfunction setActiveNav() {\n  const path = window.location.pathname;\n  const navHome = document.getElementById('nav-home');\n  const navFavorites = document.getElementById('nav-favorites');\n\n  if (path.includes('favorites')) {\n    navFavorites?.classList.add('active');\n  } else {\n    navHome?.classList.add('active');\n  }\n}\n\nfunction setupHeaderScroll() {\n  const header = document.querySelector('.header');\n  if (!header) return;\n\n  const isMobile = () => window.innerWidth < 768;\n\n  const handleScroll = () => {\n    if (isMobile() && window.scrollY > 0) {\n      header.classList.add('scrolled');\n    } else {\n      header.classList.remove('scrolled');\n    }\n  };\n\n  window.addEventListener('scroll', handleScroll, { passive: true });\n  window.addEventListener('resize', handleScroll, { passive: true });\n  handleScroll();\n}\n\nfunction setupSubscription() {\n  const subForm = document.getElementById('subscription-form');\n  if (subForm) {\n    subForm.addEventListener('submit', async e => {\n      e.preventDefault();\n      const email = subForm.email.value;\n      try {\n        await subscribe(email);\n        toast.success('Successfully subscribed!');\n        subForm.reset();\n      } catch (err) {\n        // Error toast is shown by API interceptor\n      }\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setActiveNav();\n  setupSubscription();\n  setupHeaderScroll();\n\n  // Initialize page-specific functionality based on elements present\n  if (document.getElementById('exercises-container')) {\n    initHomePage();\n  }\n\n  if (document.getElementById('favorites-container')) {\n    initFavoritesPage();\n  }\n});\n"],"names":["getTarget","openDialog","defaultOptions","toast","message","iziToast","API_BASE_URL","BREAKPOINTS","LIMITS","STORAGE_KEYS","DEBOUNCE_MS","api","axios","errorMessages","response","error","status","_a","getQuote","data","getFilters","filter","page","limit","getExercises","bodypart","muscles","equipment","keyword","params","getExerciseById","id","updateRating","rating","email","review","body","subscribe","exerciseCardTemplate","categoryCardTemplate","favoritesEmptyTemplate","paginationTemplate","templates","templateCache","loadTemplate","templateName","replacePlaceholders","template","_match","key","renderQuote","quoteData","quoteText","quoteAuthor","renderExercises","exercises","containerId","container","exercisesHtml","exercise","renderCategories","categories","categoriesHtml","cat","renderSkeleton","view","count","skeletonHtml","renderExerciseSkeleton","gifElement","titleElement","ratingElement","targetElement","bodyPartElement","equipmentElement","popularElement","caloriesElement","descriptionElement","skeletonText","runAfterLoad","task","timeout","run","renderPagination","currentPage","totalPages","firstLink","prevLink","nextLink","lastLink","pagesContainer","updateLinkState","pagesHtml","generatePageNumbers","link","isDisabled","pages","i","start","end","setupPagination","onPageChange","e","newPage","scrollToTop","targetId","target","openModal","modalId","modal","closeModal","renderExerciseModal","fullStars","_","showRatingModal","ratingModal","resetRatingForm","initRatingStars","hideRatingModal","ratingForm","ratingValue","starsContainer","selectedRating","getCurrentRating","checkedRadio","getFavorites","favorites","err","addFavorite","fav","removeFavorite","exerciseId","filtered","isFavorite","openExerciseModal","options","setupExerciseModalHandlers","onRemoveFavorite","isFavoritesPage","closeBtn","giveRatingBtn","setupRatingModalHandlers","addToFavoritesBtn","updateFavoriteButton","getTodayDate","getCachedQuote","cached","quote","author","date","today","cacheQuote","initQuote","appState","getLimit","width","initHomePage","mainContent","initialLimit","setupFilterTabs","setupExerciseCards","setupPaginationListeners","handlePageChange","setupResizeListener","fetchAndRender","timeoutId","currentLimit","newLimit","filters","filterTabs","btn","t","hideExercisesHeader","exercisesContainer","categoryCard","categoryName","categoryFilter","showExercisesHeader","setupExerciseSearch","startBtn","sectionTitle","searchForm","searchInput","clearBtn","state","getPerPage","usePagination","renderEmptyState","renderFavorites","allFavorites","perPage","shouldPaginate","startIndex","endIndex","cardTemplate","cardsHtml","currentPerPage","newPerPage","setupEventHandlers","deleteBtn","initFavoritesPage","favoritesPage","setupBurgerMenu","burgerBtn","mobileMenu","mobileCloseBtn","openMobileMenu","closeMobileMenu","setActiveNavLink","currentPath","href","setActiveNav","path","navHome","navFavorites","setupHeaderScroll","header","isMobile","handleScroll","setupSubscription","subForm"],"mappings":"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"}